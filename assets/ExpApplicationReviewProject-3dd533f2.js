import{d as E,K as j,M as C,ac as P,q as k,s as F,a as B,c as I,e as i,o as N,f as R,g as s,h as o,w as z,j as c,i as V,v as M,F as O}from"./index-501cd1c4.js";import{g as T}from"./ProjectSource-b760b0a5.js";import{p as U}from"./formSchema-64a74bbf.js";const Y=s("h4",{class:"fw-bold py-3 mb-4"},"建立計畫",-1),q={class:"row mb-3"},D=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫主持人帳號",-1),K={class:"col-sm-10"},G={class:"row mb-3"},H=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫共同負責人帳號",-1),J={class:"col-sm-10"},L={class:"row mb-3"},Q=s("label",{class:"col-sm-2 col-form-label red-star"},"主要聯絡人帳號",-1),W={class:"col-sm-10"},X={class:"input-group input-group-merge"},Z={class:"row mb-3"},$=s("label",{class:"col-sm-2 col-form-label red-star"},"主要聯絡人電話",-1),ss={class:"col-sm-10"},os={class:"input-group input-group-merge"},es={class:"row mb-3"},ts=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫編號",-1),cs={class:"col-sm-10"},as={class:"row mb-3"},ls=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫名稱",-1),ns={class:"col-sm-10"},is={class:"row mb-3"},ds=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫核銷機構(收據抬頭)",-1),rs={class:"col-sm-10"},ms={class:"row mb-3"},_s=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫所屬部門",-1),ps={class:"col-sm-10"},hs={class:"row mb-3"},us=s("label",{class:"col-sm-2 col-form-label red-star"},"產學合作",-1),bs={class:"col-sm-10"},vs={class:"row mb-3"},fs=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫經費來源",-1),ws={class:"col-sm-10"},gs={class:"row mb-3"},ys=s("label",{class:"col-sm-2 col-form-label"},"計畫描述",-1),Ss={class:"col-sm-10"},xs={class:"row mb-3"},As=s("label",{class:"col-sm-2 col-form-label red-star"},"有無計畫執行期限",-1),Es={class:"col-sm-4"},js={class:"row mb-3"},Cs=s("label",{class:"col-sm-2 col-form-label",for:""},"計畫執行期限",-1),Ps={class:"col-sm-4"},ks={class:"input-group mb-3"},Fs=s("span",{class:"input-group-text"},"起",-1),Bs={class:"col-sm-4"},Is={class:"input-group"},Ns=s("span",{class:"input-group-text"},"迄",-1),Rs=s("div",{class:"mb-2 d-flex justify-content-between flex-row-reverse mt-2"},[s("button",{type:"submit",class:"btn btn-primary"},"通過")],-1),Os=E({__name:"ExpApplicationReviewProject",props:{id:{}},async setup(b){let a,r;const v=j(),{loggedInUser:m}=C(v),_=b,f=P().map(t=>({id:t.id.toString(),name:t.name,value:t.id.toString()})),w=T(),d=k();let p;try{p=([a,r]=F(()=>d.fetchProjectByExpCaseId(_.id)),a=await a,r(),a)}catch(t){console.error(t)}const{values:g,handleSubmit:y}=B({initialValues:p,validationSchema:U}),S=I(()=>g.deadline==="yes"),h=y(async t=>{d.approveProject(_.id,t).then(()=>{d.toMain()}).catch(l=>{console.error(l)})});return(t,l)=>{const e=i("AppInput"),u=i("AppSelect"),n=i("AppRadio"),x=i("AppCard");return N(),R(O,null,[Y,s("form",{onSubmit:l[0]||(l[0]=(...A)=>c(h)&&c(h)(...A))},[o(x,{class:"mt-2"},{body:z(()=>[s("div",q,[D,s("div",K,[o(e,{placeholder:"Email",type:"email",name:"piEmail"})])]),s("div",G,[H,s("div",J,[o(e,{placeholder:"Email",type:"email",name:"coPiEmail"})])]),s("div",L,[Q,s("div",W,[s("div",X,[o(e,{placeholder:"Email",type:"email",name:"contactEmail",value:c(m)?.username},null,8,["value"])])])]),s("div",Z,[$,s("div",ss,[s("div",os,[o(e,{name:"contactPhone",value:c(m)?.phone},null,8,["value"])])])]),s("div",es,[ts,s("div",cs,[o(e,{name:"code"})])]),s("div",as,[ls,s("div",ns,[o(e,{name:"name"})])]),s("div",is,[ds,s("div",rs,[o(u,{name:"organization",options:c(f)},null,8,["options"])])]),s("div",ms,[_s,s("div",ps,[o(e,{name:"department"})])]),s("div",hs,[us,s("div",bs,[o(n,{label:"是",id:"cooperateY",name:"cooperate","checked-value":"yes"}),o(n,{label:"否",id:"cooperateN",name:"cooperate","checked-value":"no"})])]),s("div",vs,[fs,s("div",ws,[o(u,{name:"projectSource",options:c(w)},null,8,["options"])])]),s("div",gs,[ys,s("div",Ss,[o(e,{name:"description"})])]),s("div",xs,[As,s("div",Es,[o(n,{label:"有",id:"deadlineY",name:"deadline","checked-value":"yes"}),o(n,{label:"無",id:"deadlineN",name:"deadline","checked-value":"no"})])]),V(s("div",js,[Cs,s("div",Ps,[s("div",ks,[o(e,{type:"date",name:"executionPeriodFrom"}),Fs])]),s("div",Bs,[s("div",Is,[o(e,{type:"date",name:"executionPeriodTo"}),Ns])])],512),[[M,S.value]])]),_:1}),Rs],32)],64)}}});export{Os as default};
