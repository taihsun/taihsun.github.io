import{L as I}from"./LocationService-39ed4a46.js";import{m as k}from"./LocationSchema-d81df582.js";import{d as B,r as l,s as M,a as C,e as d,o as _,f as S,B as A,y as V,g as e,j as p,h as b,w as N,z as F,F as j,l as z}from"./index-72e9df21.js";const E=e("h4",{class:"fw-bold py-3 mb-3"},"修改入室前所在地",-1),R={class:"row"},T={class:"col-xxl"},q={class:"card"},D={class:"card-body"},G={class:"row mb-3"},H=e("label",{for:"name",class:"col-sm-3 col-form-label red-star"},"名稱 ",-1),J={class:"col-sm-4"},K={class:"mt-2 d-flex justify-content-between flex-row-reverse"},O=e("button",{type:"submit",class:"btn btn-primary"},"修改",-1),P=e("button",{type:"button",class:"btn btn-danger mx-1","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," 刪除 ",-1),Q=e("div",{class:"modal-body"},"確定刪除?",-1),U=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1),ee=B({__name:"LocationModification",props:{locationId:{}},async setup(v){let n,i;const r=v,c=I.getInstance(),h=z();let m=l();const t=l(""),a=l(!1);try{const s=([n,i]=M(()=>c.fetchLocationById(r.locationId)),n=await n,i(),n);m.value=s}catch(s){a.value=!1,t.value=s.message}const{handleSubmit:f,values:W,errors:X}=C({initialValues:m.value,validationSchema:k}),u=f(async s=>{c.updateLocation(s).then(o=>{console.log("ss"),a.value=!0,t.value=o}).catch(o=>{a.value=!1,t.value="更新失敗"})}),y=()=>{c.deleteLocationById(r.locationId).then(s=>{a.value=!0,h.push({name:"LocationManagement",params:{message:s}})}).catch(s=>{a.value=!1,t.value="刪除失敗"})};return(s,o)=>{const g=d("AppMessage"),x=d("AppInput"),L=d("router-link");return _(),S(j,null,[E,t.value?(_(),A(g,{key:0,message:t.value,success:a.value},null,8,["message","success"])):V("",!0),e("div",R,[e("form",{onSubmit:o[0]||(o[0]=(...w)=>p(u)&&p(u)(...w))},[e("div",T,[e("div",q,[e("div",D,[e("div",G,[H,e("div",J,[b(x,{name:"name"})])])])])]),e("div",K,[O,P,b(L,{to:"/location/management",class:"btn btn-outline-secondary"},{default:N(()=>[F("回入室前所在地管理")]),_:1})])],32)]),e("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog"},[e("div",{class:"modal-content"},[Q,e("div",{class:"modal-footer"},[U,e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:y}," 確定 ")])])])])],64)}}});export{ee as default};
