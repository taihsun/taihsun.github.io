import{aD as F,aE as g,d as D,u as N,r as f,aC as V,x as L,c as R,h as l,o as m,i as v,C as T,A as y,j as e,m as i,k as t,w as j,B as E,F as O}from"./index-c3923e02.js";import{h as U,i as H}from"./api-9f51bc32.js";import{u as q}from"./FormSchemaStore-2dcac12c.js";const z=F.create({baseURL:"http://localhost:8080/Ratatouille/api/instrument",headers:g()}),G=async r=>z.get("/fetch",{params:{id:r},headers:g()}),J=e("h4",{class:"fw-bold py-3 mb-3"},"修改儀器",-1),K={class:"row"},P={class:"col-xxl"},Q={class:"card"},W={class:"card-body"},X={class:"row mb-3"},Y=e("label",{for:"labType",class:"col-sm-3 col-form-label red-star"},"單位 ",-1),Z={class:"col-sm-4"},$={class:"row mb-3"},ee=e("label",{for:"no",class:"col-sm-3 col-form-label red-star"},"NO. ",-1),se={class:"col-sm-4"},te={class:"row mb-3"},ae=e("label",{for:"name",class:"col-sm-3 col-form-label red-star"},"名稱 ",-1),oe={class:"col-sm-4"},ne={class:"row mb-3"},ce=e("label",{for:"officialServiceBeginDate",class:"col-sm-3 col-form-label"},"Official service begin date",-1),le={class:"col-sm-4"},ie={class:"row mb-3"},re=e("label",{for:"functionDescription",class:"col-sm-3 col-form-label red-star"},"Function description ",-1),de={class:"col-sm-4"},me={class:"mt-2 d-flex justify-content-between flex-row-reverse"},ue=e("button",{type:"submit",class:"btn btn-primary"},"修改",-1),_e={key:0,type:"button",class:"btn btn-danger mx-1","data-bs-toggle":"modal","data-bs-target":"#exampleModal"},pe=e("div",{class:"modal-body"},"確定刪除?",-1),be=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1),ye=D({__name:"InstrumentModification",props:{instrumentId:{}},async setup(r){let u,_;const p=r,w=N(),a=f(""),o=f(!1),x=V().map(s=>({id:s.id,name:s.name,value:s.id.toString()}));let d=null;const{instrumentModificationFormSchema:I}=q();[u,_]=L(()=>G(p.instrumentId).then(s=>{d=s.data})),await u,_();const{handleSubmit:S}=R({validationSchema:I,initialValues:d}),b=S(async s=>{U(s).then(n=>{o.value=!0,a.value=n}).catch(n=>{o.value=!1,a.value="更新失敗"})}),k=()=>{H(p.instrumentId).then(s=>{o.value=!0,w.push({name:"InstrumentManagement",params:{message:s}})}).catch(s=>{o.value=!1,a.value="刪除失敗"})};return(s,n)=>{var h;const A=l("AppMessage"),B=l("AppSelect"),c=l("AppInput"),C=l("router-link");return m(),v(O,null,[J,a.value?(m(),T(A,{key:0,message:a.value,success:o.value},null,8,["message","success"])):y("",!0),e("div",K,[e("form",{onSubmit:n[0]||(n[0]=(...M)=>i(b)&&i(b)(...M))},[e("div",P,[e("div",Q,[e("div",W,[e("div",X,[Y,e("div",Z,[t(B,{options:i(x),name:"labType","show-error-message":!0},null,8,["options"])])]),e("div",$,[ee,e("div",se,[t(c,{name:"no","show-error-message":!0})])]),e("div",te,[ae,e("div",oe,[t(c,{name:"name","show-error-message":!0})])]),e("div",ne,[ce,e("div",le,[t(c,{name:"officialServiceBeginDate",type:"date"})])]),e("div",ie,[re,e("div",de,[t(c,{name:"functionDescription","show-error-message":!0})])])])])]),e("div",me,[ue,(h=i(d))!=null&&h.deletable?(m(),v("button",_e," 刪除 ")):y("",!0),t(C,{to:"/instrument/management",class:"btn btn-outline-secondary"},{default:j(()=>[E("回儀器管理")]),_:1})])],32),e("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog"},[e("div",{class:"modal-content"},[pe,e("div",{class:"modal-footer"},[be,e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:k}," 確定 ")])])])])])],64)}}});export{ye as default};
