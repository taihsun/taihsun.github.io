import{am as r,an as t,ao as i,ap as c,aq as a,ar as p,as as m,at as I,au as h,av as s,aw as k,ax as l,ay as b,az as y,aA as v,aB as d,aC as g,aD as u,aE as L,aF as B,aG as S,aH as F,aI as x,aJ as Q,aK as $,aL as V,aM as A,aN as z}from"./index-088406c1.js";const O=r().required().of(t().shape({itemName:i,sampleNo:c,duplicate:c})),w=e=>e!==void 0&&e.includes("pathology"),f=r().of(t().shape({item:a(),amount:a().when("item",{is:e=>e!==void 0&&e!==""&&e!=="twatc",then:e=>c,otherwise:e=>a().notRequired()}),otherItem:p("item","other")})).when((e,n)=>{const o=e[0],q=o==null?void 0:o.filter(T=>T.item!==void 0);return q&&q.length===0?n.innerType.fields.item=a().required():n.innerType.fields.item=a(),n}),K=t().shape({animalSpecies:i,animalSpeciesOther:p("animalSpecies","other"),specimen:f,deliveryStatus:i}),M=t().shape({animalSpecies:i,animalSpeciesOther:p("animalSpecies","other"),specimen:f,deliveryStatus:i,testItems:r().of(t().shape({amount:m().when("item",{is:e=>e!==void 0&&e!=="",then:e=>e.concat(c.min(1))}),otherItemName:I("item","other",i)})).when((e,n)=>(e[0].filter(T=>T.item!==void 0).length===0?n.innerType.fields.item=a().required():delete n.innerType.fields.item,n))}),H=t().shape({animalSpecies:h,animalSpeciesOther:p("animalSpecies","other"),deliveryStatus:i,noOfSpecies:c}),Y=t().shape({animalSpecies:i,animalSpeciesOther:p("animalSpecies","other"),specimen:f,deliveryStatus:i,testItems:O}),j=t().shape({animalSpecies:i,animalSpeciesOther:p("animalSpecies","other"),specimen:f,deliveryStatus:i,testItems:O}),G=t().shape({animalSpecies:i,animalSpeciesOther:p("animalSpecies","other"),specimen:f,testItems:r().of(t().shape({method:i,drug:i,amount:c}))}),N=t().shape({inspectionItems:h,cbc:s("inspectionItems","cbc",K),bloodChemistry:s("inspectionItems","bloodChemistry",M),urineAssay:s("inspectionItems","urineAssay",H),luminex:s("inspectionItems","luminex",j),elisa:s("inspectionItems","elisa",Y),plateletAggregation:s("inspectionItems","plateletAggregation",G)}),D=t().shape({organs:r().required().min(1)}),C=t().shape({animalSpecies:h,animalSpeciesOther:p("animalSpecies","other"),tissueType:k,staining:h,psrskNo:l("staining","picroSiriusRedStainKit"),tskNo:l("staining","trichromeStrainKit"),oroskNo:l("staining","oilRedOStainKit"),abskNo:l("staining","alcianBlueStainKit"),tunelNo:l("staining","tunel"),otherStainingInput:p("staining","other"),otherStainingNo:l("staining","other"),ihcOrganItems:b("staining",["ihc"]),ifOrganItems:b("staining",["if"])}),R=t().shape({type:i,magnification:y("type","可見光",i,a()),quantity:v("type",["可見光","螢光"],c,m()),channel:y("type","螢光",h,r())}),P=t().shape({species:i,strain:i,age:c,gender:i,specimenDescription:i,terms:i}),J=t().shape({sampleNumber:c,sampleId:i,sampleType:i,otherSampleTypeInput:a().when("sampleType",{is:"other",then:e=>e.required()})}),U=t().shape({sampleNumber:c,sampleId:i,sampleType:i,otherSampleTypeInput:a().when("sampleType",{is:"other",then:e=>e.required()})}),ae=t().shape({contact:i,contactTel:i,contactEmail:d,scheduledDeliveryDate:g().required(),experimentType:h,radiology:s("experimentType","radiology",J),other:s("experimentType","other",U),uploadedSampleSheetFile:u().when("experimentType",{is:e=>w(e),then:e=>e.required()}),pathologicalExpType:r().when("experimentType",{is:e=>w(e),then:e=>e.of(i).required().min(1)}),blood:s("pathologicalExpType","Blood",N),tissueSection:s("pathologicalExpType","TissueSection",D),ihc:s("pathologicalExpType","ihc",C),slideScanning:s("pathologicalExpType","SlideScanning",R),histopathology:s("pathologicalExpType","Histopathology",P)}),se=u().test("sampleSheetFile","請上傳 CSV 檔",function(e){return e&&L(e)}),re=u().test("sampleSheetFile","請上傳 PDF 檔",function(e){return e&&B(e)}),W=t().shape({organs:h,otherOrganInput:a().when("organs",{is:e=>e!==void 0&&e.includes("Other"),then:e=>e.required()})}),oe=t().shape({organ:i,otherOrganName:y("organ","Other",i,a()),no:c,items:r().of(t().shape({primaryAntibody:i,hostOther:S("host","other")}))}),ce=t().shape({fixativeTime:i,sectionType:i,organs:F("sectionType",r().of(t().shape({tissueBlockNumber:y("haveTissueBlock","yes",i,a()),name:x("haveTissueBlock","yes",i,a()),otherOrgan:y("name","Other",i,a()),no:Q("haveTissueBlock","yes",c,m()),method:x("haveTissueBlock","yes",h,r())})).required(),r()),blank:F("sectionType",i,a()),he:F("sectionType",i,a())}),E=e=>e!==void 0&&(e.includes("IHC")||e.includes("IF"));t().shape({staining:r().test("staining","Staining and Slide Scanning are mutually exclusive, choose one is required.",function(e,n){const{slideScanning:o}=n.parent;return o!==void 0&&o.length!==0||e!==void 0&&e.length!==0}),otherStainingInput:a().when("staining",{is:e=>e!==void 0&&e.includes("other"),then:e=>e.required()}),slideScanning:r().test("slideScanning","Staining and Slide Scanning are mutually exclusive, choose one is required.",function(e,n){const{staining:o}=n.parent;return o!==void 0&&o.length!==0||e!==void 0&&e.length!==0}),primaryAntibody:a().when("staining",{is:E,then:e=>e.required()}),primaryAntibodySpecies:r().when("staining",{is:E,then:e=>e.concat(h)}),otherPrimaryAntibodySpeciesInput:a().when("primaryAntibodySpecies",{is:e=>e!==void 0&&e.includes("other"),then:e=>e.required()}),secondaryAntibody:a().test("secondaryAntibody","Secondary Antibody is required when Primary Antibody is filled.",function(e){const{secondaryAntibodySpecies:n}=this.parent;return!(n!==void 0&&n.length!==0&&!e)}),secondaryAntibodySpecies:r().test("secondaryAntibodySpecies","Secondary Antibody Species is required when Secondary Antibody is filled.",function(e){const{secondaryAntibody:n}=this.parent;return!(n!==void 0&&n!==""&&(!e||e.length===0))}),otherSecondaryAntibodySpeciesInput:a().when("secondaryAntibodySpecies",{is:e=>e!==void 0&&e.includes("other"),then:e=>e.required()})}).concat(W);const X=t().shape({administratedSubstance:i,compounds:i,otherCompounds:p("compounds","commercial"),otherCompoundsFile:$("compounds","commercial"),compoundSterile:p("compounds","novel"),hazardous:i,hazardousDescription:S("hazardous","yes"),anticipatedSymptoms:i,anticipatedSymptomsDescription:S("anticipatedSymptoms","yes"),viralVector:i,viralVectorDescription:S("viralVector","yes")}),Z=t().shape({cellLineName:i,cellLineType:i,cellLineSource:h,otherCellLineSource:p("cellLineSource","others"),consistentSheddingVirus:i}),_=t().shape({description:i,euthanasia:i,organStudy:h,otherOrganStudy:a().when("organStudy",{is:e=>V("other",e),then:e=>e.concat(i)}),terms:i}),ee=r().of(t().shape({strain:i,ratOtherStrain:p("strain","ratOther"),miceOtherStrain:a().when("strain",{is:"miceOther",then:e=>e.required()}),special:a().when("strain",{is:e=>["ratOther","miceOther"].includes(e),then:e=>e.required()}),specialExplain:a().when("special",{is:"Y",then:e=>e.required()}),age:i,maleQty:m().test("maleQty","required",function(e,n){return!(e===void 0||e<=0)|!(n.parent.femaleQty===void 0||n.parent.femaleQty<=0)}),femaleQty:m().test("femaleQty","required",function(e,n){return!(e===void 0||e<=0)|!(n.parent.maleQty===void 0||n.parent.maleQty<=0)}),sendingCagesQty:m().min(1).required(),expCage:m().min(1).required()})),ie=t().shape({entrustedPi:i,contact:i,contactTel:i,contactEmail:d,animalType:i,deliveries:ee,animalArrivalDate:g().required().min(new Date,"Date must be greater than today"),animalArrivalTime:i,mouseSource:i,iacucNo:i,iacucDate:g().required(),iacucEmail:d,iacucProtocol:u().required(),healthMonitoringReport:u().required(),foodType:i,foodTypeDescription:A("foodType","normal"),waterType:i,waterTypeDescription:A("waterType","normal"),animalNo:i,alone:i,medicationInfo:I("showMedicationInfoFrom",!0,X),cellLineInfo:I("showCellLineInfoFrom",!0,Z),pathologicalExp:i,identificationMethod:i,imf:u().when("identificationMethod",{is:"Y",then:e=>e.required()}),pathologicalExpType:r().when("pathologicalExp",{is:"Y",then:e=>e.concat(h)}),blood:s("pathologicalExpType","Blood",N),tissueSection:s("pathologicalExpType","TissueSection",D),ihc:s("pathologicalExpType","ihc",C),slideScanning:s("pathologicalExpType","SlideScanning",R),histopathology:s("pathologicalExpType","Histopathology",P),necropsy:I("necropsyApplication","Y",_)}),te=r().required().of(ie);t().shape({livingForms:te});const pe=t().shape({expDateStart:g().required("必填"),expDateEnd:g().required("必填").when("expDateStart",{is:e=>e!==void 0,then:e=>e.test("is-after-start-exp-date","結束日期早於起始日期",function(n){const o=this.resolve(z("expDateStart"));return o?n&&n>o:!0})}),liaison:c,drugScreening:i,terms:i}),he=t().shape({drugScreening:i}),me=t().shape({piEmail:d,coPiEmail:d,contactEmail:d,contactPhone:i,code:i,name:i,organization:i,department:i,cooperate:i,projectSource:i,deadline:i,executionPeriodFrom:S("deadline","yes"),executionPeriodTo:S("deadline","yes")});export{he as A,pe as T,re as a,oe as i,ie as l,ae as n,me as p,se as s,ce as t};
