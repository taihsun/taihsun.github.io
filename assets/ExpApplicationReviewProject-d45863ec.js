import{d as j,K as C,M as P,ac as k,q as F,s as B,a as I,c as N,e as d,o as R,f as z,g as s,h as o,w as V,j as c,i as M,v as O,F as T}from"./index-72e9df21.js";import{g as U}from"./ProjectSource-b760b0a5.js";import{p as Y}from"./formSchema-9ddedb9e.js";const q=s("h4",{class:"fw-bold py-3 mb-4"},"建立計畫",-1),D={class:"row mb-3"},K=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫主持人帳號",-1),G={class:"col-sm-10"},H={class:"row mb-3"},J=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫共同負責人帳號",-1),L={class:"col-sm-10"},Q={class:"row mb-3"},W=s("label",{class:"col-sm-2 col-form-label red-star"},"主要聯絡人帳號",-1),X={class:"col-sm-10"},Z={class:"input-group input-group-merge"},$={class:"row mb-3"},ss=s("label",{class:"col-sm-2 col-form-label red-star"},"主要聯絡人電話",-1),os={class:"col-sm-10"},es={class:"input-group input-group-merge"},ts={class:"row mb-3"},cs=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫編號",-1),as={class:"col-sm-10"},ls={class:"row mb-3"},ns=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫名稱",-1),is={class:"col-sm-10"},ds={class:"row mb-3"},rs=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫核銷機構(收據抬頭)",-1),ms={class:"col-sm-10"},_s={class:"row mb-3"},ps=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫所屬部門",-1),hs={class:"col-sm-10"},us={class:"row mb-3"},bs=s("label",{class:"col-sm-2 col-form-label red-star"},"產學合作",-1),vs={class:"col-sm-10"},fs={class:"row mb-3"},ws=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫經費來源",-1),gs={class:"col-sm-10"},ys={class:"row mb-3"},Ss=s("label",{class:"col-sm-2 col-form-label"},"計畫描述",-1),xs={class:"col-sm-10"},As={class:"row mb-3"},Es=s("label",{class:"col-sm-2 col-form-label red-star"},"有無計畫執行期限",-1),js={class:"col-sm-4"},Cs={class:"row mb-3"},Ps=s("label",{class:"col-sm-2 col-form-label",for:""},"計畫執行期限",-1),ks={class:"col-sm-4"},Fs={class:"input-group mb-3"},Bs=s("span",{class:"input-group-text"},"起",-1),Is={class:"col-sm-4"},Ns={class:"input-group"},Rs=s("span",{class:"input-group-text"},"迄",-1),zs=s("div",{class:"mb-2 d-flex justify-content-between flex-row-reverse mt-2"},[s("button",{type:"submit",class:"btn btn-primary"},"通過")],-1),Ts=j({__name:"ExpApplicationReviewProject",props:{id:{}},async setup(f){let a,m;const w=C(),{loggedInUser:_}=P(w),p=f,g=k().map(t=>({id:t.id.toString(),name:t.name,value:t.id.toString()})),y=U(),r=F();let h;try{h=([a,m]=B(()=>r.fetchProjectByExpCaseId(p.id)),a=await a,m(),a)}catch(t){console.error(t)}const{values:S,handleSubmit:x}=I({initialValues:h,validationSchema:Y}),A=N(()=>S.deadline==="yes"),u=x(async t=>{r.approveProject(p.id,t).then(()=>{r.toMain()}).catch(l=>{console.error(l)})});return(t,l)=>{const e=d("AppInput"),b=d("AppSelect"),n=d("AppRadio"),E=d("AppCard");return R(),z(T,null,[q,s("form",{onSubmit:l[0]||(l[0]=(...i)=>c(u)&&c(u)(...i))},[o(E,{class:"mt-2"},{body:V(()=>{var i,v;return[s("div",D,[K,s("div",G,[o(e,{placeholder:"Email",type:"email",name:"piEmail"})])]),s("div",H,[J,s("div",L,[o(e,{placeholder:"Email",type:"email",name:"coPiEmail"})])]),s("div",Q,[W,s("div",X,[s("div",Z,[o(e,{placeholder:"Email",type:"email",name:"contactEmail",value:(i=c(_))==null?void 0:i.username},null,8,["value"])])])]),s("div",$,[ss,s("div",os,[s("div",es,[o(e,{name:"contactPhone",value:(v=c(_))==null?void 0:v.phone},null,8,["value"])])])]),s("div",ts,[cs,s("div",as,[o(e,{name:"code"})])]),s("div",ls,[ns,s("div",is,[o(e,{name:"name"})])]),s("div",ds,[rs,s("div",ms,[o(b,{name:"organization",options:c(g)},null,8,["options"])])]),s("div",_s,[ps,s("div",hs,[o(e,{name:"department"})])]),s("div",us,[bs,s("div",vs,[o(n,{label:"是",id:"cooperateY",name:"cooperate","checked-value":"yes"}),o(n,{label:"否",id:"cooperateN",name:"cooperate","checked-value":"no"})])]),s("div",fs,[ws,s("div",gs,[o(b,{name:"projectSource",options:c(y)},null,8,["options"])])]),s("div",ys,[Ss,s("div",xs,[o(e,{name:"description"})])]),s("div",As,[Es,s("div",js,[o(n,{label:"有",id:"deadlineY",name:"deadline","checked-value":"yes"}),o(n,{label:"無",id:"deadlineN",name:"deadline","checked-value":"no"})])]),M(s("div",Cs,[Ps,s("div",ks,[s("div",Fs,[o(e,{type:"date",name:"executionPeriodFrom"}),Bs])]),s("div",Is,[s("div",Ns,[o(e,{type:"date",name:"executionPeriodTo"}),Rs])])],512),[[O,A.value]])]}),_:1}),zs],32)],64)}}});export{Ts as default};
