import{a as S,r as u,c as C,aq as F,e as m,o as P,f as $,h as c,i as r,g as e,t as o,n as B,k as a,_ as E,ar as V}from"./index-6fec12ad.js";import{u as z}from"./FormSchemaStore-039f1104.js";import"./index.esm-5d6fa6e9.js";const I={style:{height:"100vh"},class:"d-flex flex-column justify-content-center align-items-center"},N=e("div",{class:"offset-3 col-5"},[e("img",{src:V})],-1),T={class:"mb-2"},j=e("div",{class:"mb-3"},[e("span",{"th:object":"${msg}","th:class":"*{success ? 'text-success' : 'text-danger'}"})],-1),D={class:"mb-3"},J={for:"email",class:"form-label"},L={class:"mb-3"},Q={class:"d-flex justify-content-between"},q={class:"form-label",for:"reCAPTCHA"},H={class:"input-group input-group-merge"},K={class:"mb-3"},R={class:"btn btn-primary d-grid w-100",type:"submit"},O={__name:"ForgotPassword",setup(Y){const p="6LeNpBkTAAAAAAVJZDRzygxuBAxJ2Ak0D-AztSx5",{userForgotPasswordFormSchema:_}=z(),{locale:h,t:f}=S(),l=u(""),{handleSubmit:g}=C({validationSchema:_}),n=u(""),i=u(),d=g(s=>{l.value?F(s.email,l.value).then(function(t){i.value=!0,n.value=t.data}).catch(function(t){i.value=!1,n.value=f("message.forgotPassword.failure")}):n.value="驗證碼失敗"});function b(s){l.value=s}function v(){console.log("驗證過期啦QAQ")}function A(){console.log("failed")}return(s,t)=>{const x=m("router-link"),w=m("AppInput"),y=m("AppCard");return P(),$("div",I,[c(y,null,{header:r(()=>[c(x,{to:{name:"Login"},tabindex:"-1",class:"gap-2"},{default:r(()=>[N]),_:1})]),title:r(()=>[e("h4",T,o(s.$t("text.forgotPassword")),1),e("span",{class:B(i.value?"text-success":"text-danger")},o(n.value),3)]),body:r(()=>[e("form",{class:"mb-3",onSubmit:t[0]||(t[0]=(...k)=>a(d)&&a(d)(...k))},[j,e("div",D,[e("label",J,o(s.$t("text.email")),1),c(w,{name:"email","show-error-message":!0})]),e("div",L,[e("div",Q,[e("label",q,o(s.$t("text.reCaptcha")),1)]),e("div",H,[c(a(E),{sitekey:a(p),size:"normal",theme:"light",hl:a(h),onVerify:b,onExpire:v,onFail:A},null,8,["sitekey","hl"])])]),e("div",K,[e("button",R,o(s.$t("button.generateNewPassword")),1)])],32)]),_:1})])}}};export{O as default};
