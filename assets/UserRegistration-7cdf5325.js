import{d as R,u as T,a as O,r as d,g as B,b as I,c as D,e as N,f as P,h as m,o as U,i as q,j as e,k as a,w as b,t,l as v,v as w,m as r,n as J,_ as L,p as M,q as Q}from"./index-c3923e02.js";import{u as K}from"./FormSchemaStore-2dcac12c.js";const Y={class:"content-wrapper"},Z={class:"container-xxl flex-grow-1 container-p-y"},G={class:"row d-flex justify-content-center"},H={class:"col-md-7"},W=e("a",{class:"d-flex justify-content-center mb-4","th:href":"@{/auth/login}"},[e("img",{"th:src":"@{/images/logo_tac.png}"})],-1),X={class:"d-flex align-items-start align-items-sm-center"},ee={class:"alert alert-warning"},se={class:"fw-bold mb-1 text-dark"},te={class:"mb-0 text-dark"},oe={class:"mb-0 text-dark"},ae={class:"mb-0 text-dark"},ne={class:"mb-0 text-danger"},re=e("hr",{class:"my-2"},null,-1),le={class:"row"},ie={class:"mb-1 col-md-6"},ce={for:"title",class:"form-label red-star"},de={class:"mb-1 col-md-6"},me={for:"username",class:"form-label red-star"},he={class:"mb-1 col-md-12"},ue={for:"address",class:"form-label red-star"},pe={class:"mb-1 col-md-6"},_e={class:"form-label red-star",for:"phone"},fe={class:"mb-1 col-md-6"},ge={class:"form-label",for:"mobile"},be={class:"mb-1 col-md-6"},ve={for:"organization",class:"form-label red-star"},we={class:"mb-1 col-md-6"},xe={for:"organization",class:"form-label red-star"},ye={class:"mt-2"},$e={class:"mb-1 col-md-6"},Ae={class:"form-label red-star",for:"department"},ze={class:"mb-1 col-md-6"},Se={class:"form-label red-star",for:"password"},ke={class:"mb-1 col-md-6"},Ce={class:"form-label red-star",for:"confirmPwd"},Ee={class:"mb-1 col-md-12"},Ve=e("div",{class:"invalid-feedback"},"Recaptch Error",-1),je={class:"mt-2 d-flex justify-content-between flex-row-reverse"},Fe={type:"submit",class:"btn btn-primary me-2"},Ie=R({__name:"UserRegistration",setup(Re){const{userRegistraionFormSchema:x}=K(),y="6LeNpBkTAAAAAAVJZDRzygxuBAxJ2Ak0D-AztSx5",$=T(),{locale:A}=O(),h=d(""),z=B(),u=I().map(s=>({id:s.id,name:s.name,value:s.id.toString()})),{handleSubmit:S,values:Te,defineField:p}=D({validationSchema:x}),[_]=p("organization"),[i]=p("customOrganization");function k(s){h.value=s}function C(){console.log("驗證過期啦QAQ")}function E(){console.log("failed")}const V=d(!1),l=d(""),f=S(s=>{N(s,h.value).then(function(o){$.push({name:"Login",params:{message:o.data}})}).catch(function(o){o.response?l.value=o.response.data.errors[0].defaultMessage:o.request?l.value="Server side error":l.value=o.message})}),j=P(()=>_.value!==void 0&&Q.findIndex(u,function(s){const o=s.id==_.value&&s.name==="其它";return o||(i.value=void 0),o})===0);return(s,o)=>{const n=m("AppInput"),g=m("AppSelect"),F=m("AppCard");return U(),q("div",Y,[e("div",Z,[e("div",G,[e("div",H,[W,a(F,null,{header:b(()=>[e("h5",null,t(s.$t("text.registration")),1)]),body:b(()=>[e("div",X,[e("div",ee,[e("h6",se,t(s.$t("text.note.title")),1),e("ul",null,[e("li",te,t(s.$t("text.note.first")),1),e("li",oe,t(s.$t("text.note.second")),1),e("li",ae,t(s.$t("text.note.third")),1),e("li",ne,t(s.$t("text.note.forth")),1)])])]),v(e("span",{class:"text-danger"},t(l.value),513),[[w,l.value]]),re,e("form",{onSubmit:o[1]||(o[1]=(...c)=>r(f)&&r(f)(...c))},[e("div",le,[e("div",ie,[e("label",ce,t(s.$t("text.name")),1),a(n,{name:"title","show-error-message":!0})]),e("div",de,[e("label",me,t(s.$t("text.email")),1),a(n,{name:"username","show-error-message":!0})]),e("div",he,[e("label",ue,t(s.$t("text.address")),1),a(n,{name:"address","show-error-message":!0})]),e("div",pe,[e("label",_e,t(s.$t("text.tel")),1),a(n,{name:"phone","show-error-message":!0})]),e("div",fe,[e("label",ge,t(s.$t("text.mobile")),1),a(n,{name:"mobile","show-error-message":!0})]),e("div",be,[e("label",ve,t(s.$t("text.projectChargeType")),1),a(g,{name:"projectChargeType",options:r(z)},null,8,["options"])]),e("div",we,[e("label",xe,t(s.$t("text.organization")),1),a(g,{name:"organization",options:r(u),"show-error-message":!0},null,8,["options"]),v(e("div",ye,[a(n,{name:"customOrganization",placeholder:s.$t("placeholder.customOrganization"),"show-error-message":!0,modelValue:r(i),"onUpdate:modelValue":o[0]||(o[0]=c=>J(i)?i.value=c:null)},null,8,["placeholder","modelValue"])],512),[[w,j.value]])]),e("div",$e,[e("label",Ae,t(s.$t("text.department")),1),a(n,{name:"department","show-error-message":!0})]),e("div",ze,[e("label",Se,t(s.$t("text.password")),1),a(n,{name:"pwd",type:"password",autocomplete:"off","show-error-message":!0})]),e("div",ke,[e("label",Ce,t(s.$t("text.confirmPassword")),1),a(n,{name:"confirmPwd",type:"password","show-error-message":!0})]),e("div",Ee,[a(r(L),{sitekey:r(y),size:"normal",theme:"light",hl:r(A),onVerify:k,onExpire:C,onFail:E,class:M({"is-invalid":V.value})},null,8,["sitekey","hl","class"]),Ve])]),e("div",je,[e("button",Fe,t(s.$t("button.register")),1)])],32)]),_:1})])])])])}}});export{Ie as default};
