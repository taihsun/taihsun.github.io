var T=Object.defineProperty;var v=(s,a,n)=>a in s?T(s,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[a]=n;var E=(s,a,n)=>(v(s,typeof a!="symbol"?a+"":a,n),n);import{s as R,x as g,E as l,y as D,z as S,d as N,A as L,B as C,h as O,o as c,c as o,j as V,l as b,a as t,F as m,C as P,D as w,n as A,G as k,t as u}from"./index-bc038c8e.js";import{f as X,M as B}from"./MouseHotelDbSimulator-972c555a.js";const M={apiFetchTodoList:function(){const s=new Array,a=X([B.VETERINARY_REVIEW]).map(e=>({id:e.id,caseId:e.caseId,labType:e.labType,applicant:e.applicant,creationDate:R(e.applicationDate),stage:e.mouseHotelStage}));a.length&&s.push({name:"獸醫審查",items:a});const n=g([l.EXP_APPLICATION_CHOOSING_SERVICE_ITEM,l.EXP_APPLICATION_CHOOSING_EXP_TYPE,l.EXP_APPLICATION_UPLOADING_FILE,l.EXP_APPLICATION_BALANCE_LIST,l.EXP_APPLICATION_PREVIEW]).map(e=>({id:e.id,caseId:e.serviceRequestId,labType:e.labType,applicant:e.applicant,creationDate:e.creationDate,stage:e.expCaseStage.toString()}));n.length&&s.push({name:"未完成申請",items:n});const I=g([l.EXP_APPLICATION_APPLIED,l.EXP_SD_REVIEW]).map(e=>({id:e.id,caseId:e.serviceRequestId,labType:e.labType,applicant:e.applicant,creationDate:e.creationDate,stage:e.expCaseStage}));I.length&&s.push({name:"審查實驗申請",items:I});const h=g([l.EXP_APPLICATION_APPLIED,l.VETERINARY_REVIEW]).map(e=>({id:e.id,caseId:e.serviceRequestId,labType:e.labType,applicant:e.applicant,creationDate:e.creationDate,stage:e.expCaseStage}));h.length&&s.push({name:"審查動物入室",items:h});const p=g([l.IN_PROGRESS]).map(e=>({id:e.id,caseId:e.serviceRequestId,labType:e.labType,applicant:e.applicant,creationDate:e.creationDate,stage:e.expCaseStage}));return p.length&&s.push({name:"實驗人員管理服務項目",items:p}),Promise.resolve(s)}},q="http://localhost:8080/Ratatouille";D.create({baseURL:q+"/api/exp",headers:S()});const r=class r{constructor(a){E(this,"api");this.api=a}static getInstance(){return r.instance||(r.instance=new r(M)),r.instance}fetchTodoListArray(){return this.api.apiFetchTodoList()}};E(r,"instance");let f=r;const F=t("h4",{class:"fw-bold py-3 mb-4"},"待辦事項",-1),G={key:0,class:"nav-align-top mb-4"},W={class:"nav nav-pills mb-3 nav-fill",role:"tablist"},U=["data-bs-target"],Y={class:"badge rounded-pill badge-center h-px-20 w-px-20 bg-danger"},$={class:"tab-content"},z=["id"],j={class:"table-responsive"},H={class:"table table-borderless table-hover"},J=t("thead",null,[t("tr",null,[t("th",null,"Case ID"),t("th",null,"實驗單位"),t("th",null,"申請人"),t("th",null,"建立日期"),t("th")])],-1),K=["onClick"],Q=t("i",{class:"bi bi-pencil-square"},null,-1),Z=[Q],ne=N({__name:"MainView",props:{message:{default:""},flag:{type:Boolean,default:!1}},async setup(s){let a,n;const I=f.getInstance(),h=L(),p=([a,n]=C(()=>I.fetchTodoListArray()),a=await a,n(),a);return(e,x)=>{const y=O("AppMessage");return c(),o(m,null,[F,V(y,{message:e.message,success:e.flag},null,8,["message","success"]),b(p).length?(c(),o("div",G,[t("ul",W,[(c(!0),o(m,null,P(b(p),(d,_)=>(c(),o("li",{class:"nav-item",key:d.name},[t("button",{type:"button",class:A(_===0?"nav-link active":"nav-link"),role:"tab","data-bs-toggle":"tab","data-bs-target":`#todolist${_}`},[k(u(d.name)+" ",1),t("span",Y,u(d.items.length),1)],10,U)]))),128))]),t("div",$,[(c(!0),o(m,null,P(b(p),(d,_)=>(c(),o("div",{class:A(_===0?"tab-pane fade show active":"tab-pane fade"),id:`todolist${_}`,role:"tabpanel",key:d.name},[t("div",j,[t("table",H,[J,t("tbody",null,[(c(!0),o(m,null,P(d.items,i=>(c(),o("tr",{key:i.id},[t("td",null,u(i.caseId||i.serviceRequestId),1),t("td",null,u(i.labType),1),t("td",null,u(i.applicant),1),t("td",null,u(i.creationDate),1),t("td",null,[t("a",{href:"#",onClick:ee=>b(h).proceedTo(i.id,i.stage||i.expCaseStage)},Z,8,K)])]))),128))])])])],10,z))),128))])])):w("",!0)],64)}}});export{ne as default};
