import{u as B,I as N,p as $,M as F,m as G,r as M,N as R,O as z,e as L,o as g,B as q,i,k as l,g as e,t as p,h as n,P as O,f as _,s as S,F as V,Q as r,R as x,n as m,S as j,z as o}from"./index-82a1c74a.js";import{c as A,a as E,b as T}from"./index.esm-6aa8dcb8.js";const H={class:"fw-bold py-3 mb-4"},K=e("h5",{class:"mb-0"},"已選擇服務項目",-1),Q={class:"table-responsive"},J={class:"table table-striped"},W=e("thead",null,[e("tr",null,[e("th",null,"Number"),e("th",null,"Service item"),e("th",null,"Note"),e("th",null,"Sample amount"),e("th",null,"TAC安排之實驗時間"),e("th",null,"Comment")])],-1),X={class:"input-group mb-3"},Y=["name"],Z=e("h5",{class:"mb-0"},"Survey for Drug Screening",-1),ee=e("span",{class:"fw-light"}," Is this experiment related to drug screening or development?",-1),te={class:"form-check my-3"},ae=e("label",{class:"form-check-label",for:"stage0"}," 不適用 ",-1),se={class:"form-check my-3"},le=e("label",{class:"form-check-label",for:"stage1"},[o(" stage 1. Identification & confirmation of biomarkers, new targets, drugs, bio-medical devices. "),e("br"),o(" 篩選、鑑定及確認:生物標的、分子標靶新藥、新生醫材料、新檢測試劑 ")],-1),ne={class:"form-check mb-2"},oe=e("label",{class:"form-check-label",for:"stage2"},[o(" stage 2. Synthesis & improvement of targets. Design & modification of new medical devices. "),e("br"),o(" 潛力標的物之合成及改良:新醫材/試劑之設計/改良 ")],-1),ie={class:"form-check my-3"},ce=e("label",{class:"form-check-label",for:"stage3"},[o(" stage 3. Validation with clinical samples. In vitro & in vivo efficacy evaluation. "),e("br"),o(" 臨床檢體驗證、細胞及動物有效性評估 ")],-1),re={class:"form-check mb-2"},me=e("label",{class:"form-check-label",for:"stage4"},[o(" stage 4. Optimization of leads & device models-Prototype development- Pilot-scale manufacturing. "),e("br"),o(" 先導藥品及醫材之最適化; 新醫材/試劑產品雛型之開發及試製造 ")],-1),ue={class:"form-check my-3"},de=e("label",{class:"form-check-label",for:"stage5"},[o(" stage 5. Improvement of PK, PD, & formulation- Animal toxicity and safety tests. "),e("br"),o(" 藥理藥動改良;劑型設計;毒理安全性試驗 ")],-1),pe={class:"form-check my-3"},he=e("label",{class:"form-check-label",for:"stage6"},[o(" stage 6. IND/IDE applications. "),e("br"),o(" 試驗用藥物: 新醫材/試劑之申請 ")],-1),fe=e("h5",{class:"mb-0"},"Points for Attention",-1),ge=e("ol",null,[e("li",null,[e("a",{class:"link-primary",href:"https://tmc.sinica.edu.tw/sampleprep_c.html",target:"_blank"},"血液、血清、組織及尿液/Blood, Serum, Tissue and Urine")]),e("li",null,[e("a",{class:"link-primary",href:"https://tmc.sinica.edu.tw/slide_c.html",target:"_blank"},"玻片掃描/Slide Scanning")]),e("li",null,[e("a",{class:"link-primary",href:"https://tmc.sinica.edu.tw/femur_c.html",target:"_blank"},"股骨製備/Femur Preparation")]),e("li",null,[e("a",{class:"link-primary",href:" https://tmc.sinica.edu.tw/animal_checkin_c_01.html",target:"_blank"},"動物房/Mouse Hotel ")])],-1),ve={class:"form-check form-check-inline"},_e={class:"form-check-label",for:"terms"},be=e("div",{class:"mb-2 d-flex justify-content-between flex-row-reverse"},[e("button",{class:"btn btn-primary"},"確定申請")],-1),Ve={__name:"ExpApplicationStep1",setup(ke){const w=B(),d=N(),k=$(),{items:D}=F(d),C=G.map(D.value,u=>({number:u.number,name:u.name,note:u.note,units:u.units,expDate:"",comment:""})),I={drugScreening:"",terms:[],items:C},P=A().shape({drugScreening:E().required(),terms:T().min(1,"請勾選"),items:T().of(A().shape({expDate:E().required()}))}),s=M(""),U=u=>{k.createExpCase(d.currentLabType,u).then(function(){d.$reset(),k.proceedToStep2()}).catch(function(a){console.log(a)})},y=()=>{w.push("/main")};return R(()=>{d.isEmpty&&y()}),z(()=>{d.isEmpty&&y()}),(u,a)=>{const b=L("AppCard");return g(),q(l(j),{"validation-schema":l(P),onSubmit:U,"initial-values":I},{default:i(({errors:c})=>[e("h4",H,p(l(d).currentLabType)+"服務項目",1),n(b,{class:"mb-2"},{header:i(()=>[K]),body:i(()=>[e("div",Q,[e("table",J,[W,e("tbody",null,[n(l(O),{name:"items"},{default:i(({fields:t})=>[(g(!0),_(V,null,S(t,(h,v)=>(g(),_("tr",{key:h.key},[e("td",null,p(h.value.number),1),e("td",null,p(h.value.name),1),e("td",null,p(h.value.note),1),e("td",null,[(g(!0),_(V,null,S(h.value.units,f=>(g(),_("div",{key:f.index},[e("div",X,p(f.amount)+" "+p(f.name),1)]))),128))]),e("td",null,[n(l(r),{type:"date",formate:"yyyy-mm-dd",name:`items[${v}].expDate`},{default:i(({field:f})=>[e("input",x({type:"date",formate:"yyyy-mm-dd",name:`items[${v}].expDate`,class:c[`items[${v}].expDate`]?"form-control is-invalid":"form-control "},f),null,16,Y)]),_:2},1032,["name"])]),e("td",null,[n(l(r),{name:`items[${v}].comment`},null,8,["name"])])]))),128))]),_:2},1024)])])])]),_:2},1024),n(b,{class:"mb-2"},{header:i(()=>[Z]),title:i(()=>[ee]),body:i(()=>[e("div",te,[n(l(r),{name:"drugScreening",class:m(c.drugScreening?"form-check-input is-invalid":"form-check-input"),type:"radio",value:"NA",id:"stage0",modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t)},null,8,["class","modelValue"]),ae]),e("div",se,[n(l(r),{name:"drugScreening",class:m(c.drugScreening?"form-check-input is-invalid":"form-check-input"),type:"radio",id:"stage1",value:"STAGE1",modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value=t)},null,8,["class","modelValue"]),le]),e("div",ne,[n(l(r),{name:"drugScreening",class:m(c.drugScreening?"form-check-input is-invalid":"form-check-input"),type:"radio",id:"stage2",value:"STAGE2",modelValue:s.value,"onUpdate:modelValue":a[2]||(a[2]=t=>s.value=t)},null,8,["class","modelValue"]),oe]),e("div",ie,[n(l(r),{name:"drugScreening",class:m(c.drugScreening?"form-check-input is-invalid":"form-check-input"),type:"radio",id:"stage3",value:"STAGE3",modelValue:s.value,"onUpdate:modelValue":a[3]||(a[3]=t=>s.value=t)},null,8,["class","modelValue"]),ce]),e("div",re,[n(l(r),{name:"drugScreening",class:m(c.drugScreening?"form-check-input is-invalid":"form-check-input"),type:"radio",id:"stage4",value:"STAGE4",modelValue:s.value,"onUpdate:modelValue":a[4]||(a[4]=t=>s.value=t)},null,8,["class","modelValue"]),me]),e("div",ue,[n(l(r),{name:"drugScreening",class:m(c.drugScreening?"form-check-input is-invalid":"form-check-input"),type:"radio",id:"stage5",value:"STAGE5",modelValue:s.value,"onUpdate:modelValue":a[5]||(a[5]=t=>s.value=t)},null,8,["class","modelValue"]),de]),e("div",pe,[n(l(r),{name:"drugScreening",class:m(c.drugScreening?"form-check-input is-invalid":"form-check-input"),type:"radio",id:"stage6",value:"STAGE6",modelValue:s.value,"onUpdate:modelValue":a[6]||(a[6]=t=>s.value=t)},null,8,["class","modelValue"]),he])]),_:2},1024),n(b,{class:"mb-2"},{header:i(()=>[fe]),body:i(()=>[e("div",null,[ge,e("div",ve,[n(l(r),{name:"terms",type:"checkbox",class:"form-check-input",id:"terms",value:"agree"},{default:i(({field:t})=>[e("input",x(t,{name:"terms",type:"checkbox",class:c.terms?"form-check-input is-invalid":"form-check-input",id:"terms",value:"agree"}),null,16)]),_:2},1024),e("label",_e,[e("span",{class:m(c.terms?"text-danger":"")}," 我已詳細閱讀注意事項 (I have read the notes for applicants)",2)])])])]),_:2},1024),be]),_:1},8,["validation-schema"])}}};export{Ve as default};
