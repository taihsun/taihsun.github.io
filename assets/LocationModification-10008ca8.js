import{L as I}from"./LocationService-21239143.js";import{m as k}from"./LocationSchema-a5600f77.js";import{d as B,r as l,B as M,e as C,h as d,o as _,c as S,H as A,D as V,a as e,l as p,j as b,w as N,G as F,F as j,p as D}from"./index-bc038c8e.js";import"./LocationDbSimulator-d223c353.js";const E=e("h4",{class:"fw-bold py-3 mb-3"},"修改入室前所在地",-1),G={class:"row"},H={class:"col-xxl"},R={class:"card"},T={class:"card-body"},q={class:"row mb-3"},z=e("label",{for:"name",class:"col-sm-3 col-form-label red-star"},"名稱 ",-1),J={class:"col-sm-4"},K={class:"mt-2 d-flex justify-content-between flex-row-reverse"},O=e("button",{type:"submit",class:"btn btn-primary"},"修改",-1),P=e("button",{type:"button",class:"btn btn-danger mx-1","data-bs-toggle":"modal","data-bs-target":"#exampleModal"}," 刪除 ",-1),Q=e("div",{class:"modal-body"},"確定刪除?",-1),U=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1),te=B({__name:"LocationModification",props:{locationId:{}},async setup(v){let n,i;const r=v,c=I.getInstance(),h=D();let m=l();const s=l(""),a=l(!1);try{const t=([n,i]=M(()=>c.fetchLocationById(r.locationId)),n=await n,i(),n);m.value=t}catch(t){a.value=!1,s.value=t.message}const{handleSubmit:f,values:W,errors:X}=C({initialValues:m.value,validationSchema:k}),u=f(async t=>{c.updateLocation(t).then(o=>{console.log("ss"),a.value=!0,s.value=o}).catch(o=>{a.value=!1,s.value="更新失敗"})}),y=()=>{c.deleteLocationById(r.locationId).then(t=>{a.value=!0,h.push({name:"LocationManagement",params:{message:t}})}).catch(t=>{a.value=!1,s.value="刪除失敗"})};return(t,o)=>{const g=d("AppMessage"),x=d("AppInput"),L=d("router-link");return _(),S(j,null,[E,s.value?(_(),A(g,{key:0,message:s.value,success:a.value},null,8,["message","success"])):V("",!0),e("div",G,[e("form",{onSubmit:o[0]||(o[0]=(...w)=>p(u)&&p(u)(...w))},[e("div",H,[e("div",R,[e("div",T,[e("div",q,[z,e("div",J,[b(x,{name:"name"})])])])])]),e("div",K,[O,P,b(L,{to:"/location/management",class:"btn btn-outline-secondary"},{default:N(()=>[F("回入室前所在地管理")]),_:1})])],32)]),e("div",{class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},[e("div",{class:"modal-dialog"},[e("div",{class:"modal-content"},[Q,e("div",{class:"modal-footer"},[U,e("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal",onClick:y}," 確定 ")])])])])],64)}}});export{te as default};
