import{a as L,c as B,S as $}from"./NonLivingFormEditingZone.vue_vue_type_script_setup_true_lang-a2234b3a.js";import{d as g,c as k,o as l,i as d,k as v,Q as b,R as x,F as f,z as y,j as e,t as _,Y as w,s as E,x as F,r as D,f as N,B as S,m as r,p as j,Z as I,h as q,w as T,C as A,A as C}from"./index-c3923e02.js";import"./LocationApi-2a0b8f6c.js";import"./formSchema-a822dc0e.js";const P=g({inheritAttrs:!1,__name:"ExpApplicationStep6LivingFormDisplay",props:{form:{}},setup(h){return k({initialValues:h.form}),(n,c)=>(l(),d("div",b(x(n.$attrs)),[v(L,{values:n.form},null,8,["values"])],16))}}),V=["id"],Z={class:"accordion-item"},z={class:"accordion-header",id:"headingOne"},M=["data-bs-target","aria-controls"],O={class:"mb-0"},H=["id","data-bs-parent"],G={class:"accordion-body"},R=g({inheritAttrs:!1,__name:"ExpApplicationStep6LivingFormPreview",props:{livingForms:{}},setup(h){const o=()=>{const n=document.getElementsByName("expApplicationStep6LivingFormDisplay");if(n)for(let c of n){c.querySelectorAll("input, textarea, select, a").forEach(a=>{a instanceof HTMLAnchorElement?a.style.display="none":a.disabled=!0});const t=c.querySelectorAll('[name="organSelector"]');t&&t.forEach(a=>{a.style.display="none"});const p=c.querySelectorAll(".app-minus-btn, .app-plus-btn");p&&p.forEach(a=>{a.style.display="none"})}};return(n,c)=>(l(),d("div",b(x(n.$attrs)),[(l(!0),d(f,null,y(n.livingForms,(s,t)=>(l(),d("div",{key:s.id},[e("div",{class:"accordion my-2",id:`slideScanningAccordion${t}`},[e("div",Z,[e("h2",z,[e("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${t}`,"aria-expanded":"false","aria-controls":`collapse${t}`,onClick:o},[e("h5",O,"# "+_(t+1),1)],8,M)]),e("div",{id:`collapse${t}`,class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":`#slideScanningAccordion${t}`},[e("div",G,[v(P,{name:"expApplicationStep6LivingFormDisplay",form:s},null,8,["form"])])],8,H)])],8,V)]))),128))],16))}}),Q=g({inheritAttrs:!1,__name:"ExpApplicationStep6NonLivingFormPreview",props:{form:{}},setup(h){return w(()=>{const o=document.getElementById("nonLivingFormEditingZone");if(o){o.querySelectorAll("input, textarea, select, a").forEach(t=>{t instanceof HTMLAnchorElement?t.style.display="none":t.disabled=!0});const c=o.querySelectorAll('[name="organSelector"]');c&&c.forEach(t=>{t.style.display="none"});const s=o.querySelectorAll(".app-minus-btn, .app-plus-btn");s&&s.forEach(t=>{t.style.display="none"})}}),(o,n)=>(l(),d("div",b(x(o.$attrs)),[v(B)],16))}}),U={class:"vstack"},Y={class:"p-2"},J={class:"col-7 my-1"},K={class:"mx-2"},W={class:"col-2 my-1"},X={class:"mx-2"},ee={class:"col-2 my-1"},te={class:"mx-2"},se={class:"d-flex flex-row justify-content-end"},oe={class:"p-2"},ne={class:"d-flex flex-column"},ae={class:"p-2"},ie=e("b",null,"實驗總費用",-1),le={class:"badge text-bg-info"},ce=g({inheritAttrs:!1,__name:"ExpApplicationStep6ProjectBalanceDeduction",props:{projectBalanceDeductions:{default:()=>[]}},async setup(h){let o,n;const c=E(),s=([o,n]=F(()=>c.fetchTotalExpCaseAmounts()),o=await o,n(),o),t=D(c.expCase.projectBalanceDeductions),p=N(()=>t.value.reduce((a,u)=>a+u.balance,0));return(a,u)=>(l(),d("div",b(x(a.$attrs)),[e("div",U,[e("div",Y,[(l(!0),d(f,null,y(a.projectBalanceDeductions,i=>(l(),d("div",{class:"row",key:i.name},[e("div",J,[e("span",K,_(i.name),1)]),e("div",W,[e("span",X,_(r(I)(i.type)),1)]),e("div",ee,[e("span",te,_(i.balance)+"元",1)])]))),128))])]),e("div",se,[e("div",oe,[e("div",ne,[e("div",ae,[ie,S(": "),e("span",le,_(r(s)),1),S(" 元, 扣除金額: "),e("span",{class:j(["badge text-bg-success",{"text-bg-danger":r(s)>p.value}])},_(p.value),3),S(" 元 ")])])])])],16))}}),re=e("h4",{class:"fw-bold py-3 mb-4"},"預覽",-1),de={class:"row"},pe={class:"mb-4 mb-xl-0"},me={class:"mt-3"},_e={class:"row"},ue=e("a",{class:"list-group-item list-group-item-action active",id:"exp-service-item-list","data-bs-toggle":"list",href:"#exp-service-item"},"服務項目",-1),he=e("a",{class:"list-group-item list-group-item-action",id:"deduction-list","data-bs-toggle":"list",href:"#deduction"},"扣款計畫",-1),fe={class:"col-12"},ve={class:"tab-content p-0"},ge={class:"tab-pane fade show active",id:"exp-service-item"},ye={class:"row"},be={class:"card"},xe={class:"card-body"},Se={class:"table table-striped table-sm"},$e=e("tr",null,[e("th",null,"Number"),e("th",null,"Service Items"),e("th",null,"Sample amount"),e("th",null,"實驗時間"),e("th",null,"Comment")],-1),Ae={class:"tab-pane fade",id:"application-form"},Ce={class:"tab-pane fade",id:"deduction"},ke=g({__name:"ExpApplicationStep6",props:{id:{}},async setup(h){let o,n;const c=h,s=E();[o,n]=F(()=>s.loadExpCaseById(c.id)),await o,n();const t=()=>{const p=document.getElementById("nonLivingFormEditingZone");if(p){p.querySelectorAll("input, textarea, select, a").forEach(m=>{m instanceof HTMLAnchorElement?m.style.display="none":m.disabled=!0});const u=p.querySelectorAll('[name="organSelector"]');u&&u.forEach(m=>{m.style.display="none"});const i=p.querySelectorAll(".app-minus-btn, .app-plus-btn");i&&i.forEach(m=>{m.style.display="none"})}};return(p,a)=>{const u=q("AppCard");return l(),d(f,null,[re,v(u,null,{body:T(()=>[e("div",de,[e("div",pe,[e("div",me,[e("div",_e,[e("div",{class:"col-12 mb-3 mb-md-0"},[e("div",{class:"list-group list-group-horizontal-md"},[ue,e("a",{class:"list-group-item list-group-item-action",id:"application-form-list","data-bs-toggle":"list",href:"#application-form",onClick:t},"活體/非活體申請表"),he])]),e("div",fe,[e("div",ve,[e("div",ge,[e("div",ye,[e("div",be,[e("div",xe,[e("table",Se,[$e,(l(!0),d(f,null,y(r(s).expCase.expServiceItems,i=>(l(),d("tr",{key:i.id},[e("td",null,_(i.code),1),e("td",null,_(i.name),1),e("td",null,[(l(!0),d(f,null,y(i.expServiceItemUnits,m=>(l(),d("span",{key:m.id},_(`${m.amount} (${m.name})`),1))),128))]),e("td",null,_(i.experimentalTime),1),e("td",null,_(i.comment),1)]))),128))])])])])]),e("div",Ae,[r(s).expCase.sampleCategory===r($).LIVING?(l(),A(R,{key:0,livingForms:r(s).expCase.livingForms},null,8,["livingForms"])):C("",!0),r(s).expCase.sampleCategory===r($).NON_LIVING?(l(),A(Q,{key:1,form:r(s).expCase.nonLivingForm},null,8,["form"])):C("",!0)]),e("div",Ce,[v(ce,{projectBalanceDeductions:r(s).expCase.projectBalanceDeductions},null,8,["projectBalanceDeductions"])])])])])])])])]),_:1}),e("button",{onClick:a[0]||(a[0]=(...i)=>r(s).proceedToStep4&&r(s).proceedToStep4(...i))},"back")],64)}}});export{ke as default};
