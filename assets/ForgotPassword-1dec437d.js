import{a as E,r as u,c as k,ar as A,e as m,o as F,f as P,h as c,i as r,g as e,t as o,n as I,k as a,_ as T,as as $}from"./index-e1983c57.js";import{u as V}from"./FormSchemaStore-c17f1859.js";import"./index.esm-6a6e6be2.js";const j={style:{height:"100vh"},class:"d-flex flex-column justify-content-center align-items-center"},B=e("div",{class:"offset-3 col-5"},[e("img",{src:$})],-1),N={class:"mb-2"},z=e("div",{class:"mb-3"},[e("span",{"th:object":"${msg}","th:class":"*{success ? 'text-success' : 'text-danger'}"})],-1),H={class:"mb-3"},K={for:"email",class:"form-label"},Q={class:"mb-3"},Y={class:"d-flex justify-content-between"},D={class:"form-label",for:"reCAPTCHA"},L={class:"input-group input-group-merge"},R={class:"mb-3"},q={class:"btn btn-primary d-grid w-100",type:"submit"},U={__name:"ForgotPassword",setup(G){const _={}.VITE_RECAPTCH_SITE_KEY,{userForgotPasswordFormSchema:p}=V(),{locale:h,t:f}=E(),l=u(""),{handleSubmit:g}=k({validationSchema:p}),n=u(""),i=u(),d=g(s=>{l.value?A(s.email,l.value).then(function(t){i.value=!0,n.value=t.data}).catch(function(t){i.value=!1,n.value=f("message.forgotPassword.failure")}):n.value="驗證碼失敗"});function b(s){l.value=s}function v(){console.log("驗證過期啦QAQ")}function x(){console.log("failed")}return(s,t)=>{const w=m("router-link"),y=m("AppInput"),C=m("AppCard");return F(),P("div",j,[c(C,null,{header:r(()=>[c(w,{to:{name:"Login"},tabindex:"-1",class:"gap-2"},{default:r(()=>[B]),_:1})]),title:r(()=>[e("h4",N,o(s.$t("text.forgotPassword")),1),e("span",{class:I(i.value?"text-success":"text-danger")},o(n.value),3)]),body:r(()=>[e("form",{class:"mb-3",onSubmit:t[0]||(t[0]=(...S)=>a(d)&&a(d)(...S))},[z,e("div",H,[e("label",K,o(s.$t("text.email")),1),c(y,{name:"email","show-error-message":!0})]),e("div",Q,[e("div",Y,[e("label",D,o(s.$t("text.reCaptcha")),1)]),e("div",L,[c(a(T),{sitekey:a(_),size:"normal",theme:"light",hl:a(h),onVerify:b,onExpire:v,onFail:x},null,8,["sitekey","hl"])])]),e("div",R,[e("button",q,o(s.$t("button.generateNewPassword")),1)])],32)]),_:1})])}}};export{U as default};
