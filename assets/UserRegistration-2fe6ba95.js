import{d as F,u as N,r as d,a as B,b as U,c as M,e as h,o as Y,f as J,g as e,h as a,w,t as o,i as x,v as A,j as l,k as L,_ as Q,n as q,l as K,m as Z}from"./index-501cd1c4.js";import{u as G}from"./FormSchemaStore-f2d56775.js";import{O as H}from"./OrganizationService-cea159d9.js";var p=(r=>(r[r.INDUSTRY=0]="INDUSTRY",r[r.ACADEMIC=1]="ACADEMIC",r))(p||{});const S=r=>{switch(r){case 0:return"非學術界";case 1:return"學術界";default:return""}},P=()=>[{id:0,name:S(0),value:p[0]},{id:1,name:S(1),value:p[1]}],W={class:"content-wrapper"},X={class:"container-xxl flex-grow-1 container-p-y"},ee={class:"row d-flex justify-content-center"},se={class:"col-md-7"},te=e("a",{class:"d-flex justify-content-center mb-4","th:href":"@{/auth/login}"},[e("img",{"th:src":"@{/images/logo_tac.png}"})],-1),oe={class:"d-flex align-items-start align-items-sm-center"},ae={class:"alert alert-warning"},ne={class:"fw-bold mb-1 text-dark"},re={class:"mb-0 text-dark"},le={class:"mb-0 text-dark"},ie={class:"mb-0 text-dark"},ce={class:"mb-0 text-danger"},de=e("hr",{class:"my-2"},null,-1),me={class:"row"},ue={class:"mb-1 col-md-6"},he={for:"title",class:"form-label red-star"},pe={class:"mb-1 col-md-6"},_e={for:"username",class:"form-label red-star"},fe={class:"mb-1 col-md-12"},ge={for:"address",class:"form-label red-star"},ve={class:"mb-1 col-md-6"},be={class:"form-label red-star",for:"phone"},we={class:"mb-1 col-md-6"},xe={class:"form-label",for:"mobile"},Ae={class:"mb-1 col-md-6"},Se={for:"projectChargeType",class:"form-label red-star"},$e={class:"mb-1 col-md-6"},ye={for:"organization",class:"form-label red-star"},ze={class:"mt-2"},ke={class:"mb-1 col-md-6"},Ce={class:"form-label red-star",for:"department"},Ee={class:"mb-1 col-md-6"},Ie={class:"form-label red-star",for:"password"},Re={class:"mb-1 col-md-6"},De={class:"form-label red-star",for:"confirmPwd"},Oe={class:"mb-1 col-md-12"},Te=e("div",{class:"invalid-feedback"},"Recaptch Error",-1),Ve={class:"mt-2 d-flex justify-content-between flex-row-reverse"},je={type:"submit",class:"btn btn-primary me-2"},Me=F({__name:"UserRegistration",setup(r){const{userRegistraionFormSchema:$}=G(),y="6LeNpBkTAAAAAAVJZDRzygxuBAxJ2Ak0D-AztSx5",z=K(),{locale:k}=N(),C=H.getInstance(),_=d(""),E=P(),m=d([]);C.fetchOrganizations().then(s=>{m.value=s.map(t=>({id:t.id,name:t.name,value:t.id.toString()}))});const{handleSubmit:I,values:Fe,defineField:f}=B({validationSchema:$}),[g]=f("organization"),[c]=f("customOrganization");function R(s){_.value=s}function D(){console.log("驗證過期啦QAQ")}function O(){console.log("failed")}const T=d(!1),i=d(""),v=I(s=>{U(s,_.value).then(function(t){z.push({name:"Login",params:{message:t.data}})}).catch(function(t){t.response?i.value=t.response.data.errors[0].defaultMessage:t.request?i.value="Server side error":i.value=t.message})}),V=M(()=>g.value!==void 0&&Z.findIndex(m,function(s){const t=s.id==g.value&&s.name==="其它";return t||(c.value=void 0),t})===0);return(s,t)=>{const n=h("AppInput"),b=h("AppSelect"),j=h("AppCard");return Y(),J("div",W,[e("div",X,[e("div",ee,[e("div",se,[te,a(j,null,{header:w(()=>[e("h5",null,o(s.$t("text.registration")),1)]),body:w(()=>[e("div",oe,[e("div",ae,[e("h6",ne,o(s.$t("text.note.title")),1),e("ul",null,[e("li",re,o(s.$t("text.note.first")),1),e("li",le,o(s.$t("text.note.second")),1),e("li",ie,o(s.$t("text.note.third")),1),e("li",ce,o(s.$t("text.note.forth")),1)])])]),x(e("span",{class:"text-danger"},o(i.value),513),[[A,i.value]]),de,e("form",{onSubmit:t[1]||(t[1]=(...u)=>l(v)&&l(v)(...u))},[e("div",me,[e("div",ue,[e("label",he,o(s.$t("text.name")),1),a(n,{name:"title","show-error-message":!0})]),e("div",pe,[e("label",_e,o(s.$t("text.email")),1),a(n,{name:"username","show-error-message":!0})]),e("div",fe,[e("label",ge,o(s.$t("text.address")),1),a(n,{name:"address","show-error-message":!0})]),e("div",ve,[e("label",be,o(s.$t("text.tel")),1),a(n,{name:"phone","show-error-message":!0})]),e("div",we,[e("label",xe,o(s.$t("text.mobile")),1),a(n,{name:"mobile","show-error-message":!0})]),e("div",Ae,[e("label",Se,o(s.$t("text.projectChargeType")),1),a(b,{id:"projectChargeType",name:"projectChargeType",options:l(E)},null,8,["options"])]),e("div",$e,[e("label",ye,o(s.$t("text.organization")),1),a(b,{name:"organization",options:m.value,"show-error-message":!0},null,8,["options"]),x(e("div",ze,[a(n,{name:"customOrganization",placeholder:s.$t("placeholder.customOrganization"),"show-error-message":!0,modelValue:l(c),"onUpdate:modelValue":t[0]||(t[0]=u=>L(c)?c.value=u:null)},null,8,["placeholder","modelValue"])],512),[[A,V.value]])]),e("div",ke,[e("label",Ce,o(s.$t("text.department")),1),a(n,{name:"department","show-error-message":!0})]),e("div",Ee,[e("label",Ie,o(s.$t("text.password")),1),a(n,{name:"pwd",type:"password",autocomplete:"off","show-error-message":!0})]),e("div",Re,[e("label",De,o(s.$t("text.confirmPassword")),1),a(n,{name:"confirmPwd",type:"password","show-error-message":!0})]),e("div",Oe,[a(l(Q),{sitekey:l(y),size:"normal",theme:"light",hl:l(k),onVerify:R,onExpire:D,onFail:O,class:q({"is-invalid":T.value})},null,8,["sitekey","hl","class"]),Te])]),e("div",Ve,[e("button",je,o(s.$t("button.register")),1)])],32)]),_:1})])])])])}}});export{Me as default};
