import{d as N,y as $,r as i,z as j,aR as E,a as T,aS as z,e as p,o as t,f as c,h as a,w as o,g as e,t as l,D as y,F as _,A as b,j as v,aT as M,B as U}from"./index-224d4b7d.js";import{_ as q,a as G}from"./ExpApplicationStep6NonLivingFormPreview.vue_vue_type_script_setup_true_lang-6410bebe.js";import{v as H}from"./ExpCaseFormSchema-10f5e789.js";import"./SelectedIhcCommissionedItemPanel-07fdbe27.js";import"./LocationService-83028c48.js";const J=e("h4",{class:"fw-bold py-3 mb-4"},"審查動物入室",-1),K={class:"my-1"},O={class:"my-1"},P=e("h5",null,"委託實驗項目",-1),Q={id:"expServiceItemSection",class:"my-2"},W={class:"table"},X=e("thead",{class:"table-dark"},[e("tr",null,[e("th",null,"Number"),e("th",null,"Service Item"),e("th",null,"總數"),e("th",null,"備註")])],-1),Y=e("h5",{class:"mb-0"},"已簽名的申請表",-1),Z={class:"list-group"},ee=e("h5",null,"核查結果",-1),ne={class:"mb-4"},te={id:"section3"},ae={class:"mb-2 d-flex justify-content-between flex-row-reverse mt-2"},re=N({__name:"VeterinaryReview",props:{id:{}},async setup(F){let f,k;const x=F,L=$(),m=i(),g=i(),S=i([]),w=i(),R=i(""),D=i("");[f,k]=j(()=>E(x.id).then(s=>{m.value=s.livingForms,g.value=s.nonLivingForm,S.value=s.expServiceItems,w.value=s.fileLinks}).catch(s=>{console.error(s)})),await f,k();const{handleSubmit:V,values:C}=T({validationSchema:H}),A=V(async s=>{await z(x.id).then(()=>{L.toMain()}).catch(u=>{console.error(u.message)})});return(s,u)=>{const r=p("AppCard"),B=p("AppDownloadLink"),I=p("AppCheckbox"),h=p("AppRadio");return t(),c(_,null,[J,a(r,{class:"my-1"},{body:o(()=>[e("div",K,"已安排之實驗日期區間: "+l(R.value),1),e("div",O,"TAC聯絡窗口/SD: "+l(D.value),1)]),_:1}),a(r,null,{header:o(()=>[e("h5",null,l(m.value?"活體入室申請表":"非活體入室申請表"),1)]),body:o(()=>[m.value?(t(),y(q,{key:0,livingForms:m.value},null,8,["livingForms"])):(t(),y(G,{key:1,form:g.value},null,8,["form"]))]),_:1}),a(r,{class:"my-1"},{header:o(()=>[P]),body:o(()=>[e("div",Q,[e("table",W,[X,e("tbody",null,[(t(!0),c(_,null,b(S.value,n=>(t(),c("tr",{key:n.id},[e("td",null,l(n.code),1),e("td",null,l(n.name),1),e("td",null,[(t(!0),c(_,null,b(n.expServiceItemUnits,d=>(t(),c("div",{key:d.index},l(d.amount)+" "+l(d.name),1))),128))]),e("td",null,l(n.comment),1)]))),128))])])])]),_:1}),a(r,{class:"my-1"},{header:o(()=>[Y]),body:o(()=>[e("ul",Z,[(t(!0),c(_,null,b(w.value,(n,d)=>(t(),c("li",{class:"list-group-item d-flex border-0",key:d},[a(B,{name:n.name,value:n.value},null,8,["name","value"])]))),128))])]),_:1}),a(r,{class:"my-1"},{header:o(()=>[ee]),body:o(()=>[e("div",ne,[a(I,{id:"urgent",name:"urgent","checked-value":"urgent",label:"是否為急件"})]),e("div",te,[a(h,{id:"approve",name:"action","checked-value":"approve",label:"核准入室申請"}),a(h,{id:"cancel",name:"action","checked-value":"cancel",label:"撤銷"}),a(h,{id:"revise",name:"action","checked-value":"revise",label:"退回申請人修改"}),["revise","cancel"].includes(v(C).action)?(t(),y(M,{key:0,name:"reason",placeholder:v(C).action==="cancel"?"請填寫撤銷原因":"請填寫修改建議"},null,8,["placeholder"])):U("",!0)])]),_:1}),e("div",ae,[e("button",{type:"button",class:"btn btn-primary",onClick:u[0]||(u[0]=(...n)=>v(A)&&v(A)(...n))},"確定")])],64)}}});export{re as default};
