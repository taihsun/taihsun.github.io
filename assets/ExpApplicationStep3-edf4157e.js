import{p as S,r as p,q as B,e as b,o as d,f as u,h as _,i as r,j as y,v as x,g as e,k as C,F as g,s as L,m as j}from"./index-6e351f0c.js";const D=e("p",{class:"text-danger text-decoration-line-through"}," 實驗類型選擇[非活體],並且病理實驗類型為[血液及尿液相關實驗],[組織切片],[玻片掃描]時才顯示步驟 ",-1),R=e("h4",{class:"fw-bold py-3 mb-4"},"下載及上傳簽名申請表",-1),T=e("h5",{class:"mb-0"},"上傳已簽名申請表",-1),$={class:"input-group"},N=e("h5",{class:"mb-0"},"下載已簽名申請表",-1),U={class:"demo-inline-spacing mt-3"},V={class:"list-group"},q=["onClick"],I=e("i",{class:"bi bi-x"},null,-1),z=[I],G={class:"mb-2 d-flex justify-content-between flex-row-reverse mt-4"},K={__name:"ExpApplicationStep3",props:["id"],async setup(k){let a,m;const n=k,t=S();t.loadExpCaseById(n.id);const h=p(null),l=p(([a,m]=B(()=>t.fetchUploadedExpApplicationForms(n.id)),a=await a,m(),a)),c=p([]);function w(s){Array.from(s.target.files).forEach(o=>{c.value.push(o)})}async function A(){try{await t.uploadFiles(n.id,c.value),c.value=[],l.value=await t.fetchUploadedExpApplicationForms(n.id)}catch(s){console.error(s)}h.value.value=""}const E=s=>{j.pullAt(l.value,s),t.deleteExpCaseApplicationForms(s,n.id)};return(s,o)=>{const f=b("AppCard"),F=b("AppDownloadLink");return d(),u(g,null,[D,R,_(f,null,{header:r(()=>[T]),body:r(()=>[e("div",$,[e("input",{type:"file",class:"form-control",onChange:w,multiple:"",ref_key:"fileRef",ref:h},null,544),e("button",{class:"btn btn-outline-primary",type:"button",onClick:A},"上傳")])]),_:1}),y(_(f,{class:"mt-4"},{header:r(()=>[N]),body:r(()=>[e("div",U,[e("ul",V,[(d(!0),u(g,null,L(l.value,(i,v)=>(d(),u("li",{class:"list-group-item d-flex justify-content-between border-0",key:v},[_(F,{name:i.name,value:i.value},null,8,["name","value"]),e("a",{href:"#",class:"link-danger",onClick:H=>E(v)},z,8,q)]))),128))])])]),_:1},512),[[x,l.value.length]]),e("div",G,[e("div",null,[y(e("button",{class:"btn btn-primary",onClick:o[0]||(o[0]=i=>C(t).proceedToStep4())}," 下一步 ",512),[[x,l.value.length]])]),e("button",{type:"button",class:"btn btn-outline-secondary",onClick:o[1]||(o[1]=i=>C(t).proceedToStep2())}," 回上頁 ")])],64)}}};export{K as default};
