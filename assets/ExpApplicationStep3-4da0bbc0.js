import{d as S,s as B,r as p,x as L,K as j,h as b,o as d,i as u,k as _,w as r,j as e,l as y,v as x,F as C,z as D,m as w,q as R}from"./index-c3923e02.js";const T=e("p",{class:"text-danger text-decoration-line-through"}," 實驗類型選擇[非活體],並且病理實驗類型為[血液及尿液相關實驗],[組織切片],[玻片掃描]時才顯示步驟 ",-1),$=e("h4",{class:"fw-bold py-3 mb-4"},"下載及上傳簽名申請表",-1),N=e("h5",{class:"mb-0"},"上傳已簽名申請表",-1),U={class:"input-group"},V=e("h5",{class:"mb-0"},"下載已簽名申請表",-1),q={class:"demo-inline-spacing mt-3"},z={class:"list-group"},I=["onClick"],K=e("i",{class:"bi bi-x"},null,-1),M=[K],G={class:"mb-2 d-flex justify-content-between flex-row-reverse mt-4"},O=S({__name:"ExpApplicationStep3",props:{id:{}},async setup(k){let l,m;const a=k,t=B(),f=p(null),n=p(([l,m]=L(()=>t.fetchUploadedExpApplicationForms(a.id)),l=await l,m(),l)),c=p([]);function g(o){Array.from(o.target.files).forEach(s=>{c.value.push(s)})}async function A(){try{await t.uploadFiles(c.value),c.value=[],n.value=await t.fetchUploadedExpApplicationForms(a.id)}catch(o){console.error(o)}f.value.value=""}const E=o=>{R.pullAt(n.value,o),t.deleteExpCaseApplicationForms(o,a.id)};return j(async()=>{await t.loadExpCaseById(a.id)}),(o,s)=>{const h=b("AppCard"),F=b("AppDownloadLink");return d(),u(C,null,[T,$,_(h,null,{header:r(()=>[N]),body:r(()=>[e("div",U,[e("input",{type:"file",class:"form-control",onChange:g,multiple:"",ref_key:"fileRef",ref:f},null,544),e("button",{class:"btn btn-outline-primary",type:"button",onClick:A},"上傳")])]),_:1}),y(_(h,{class:"mt-4"},{header:r(()=>[V]),body:r(()=>[e("div",q,[e("ul",z,[(d(!0),u(C,null,D(n.value,(i,v)=>(d(),u("li",{class:"list-group-item d-flex justify-content-between border-0",key:v},[_(F,{name:i.name,value:i.value},null,8,["name","value"]),e("a",{href:"#",class:"link-danger",onClick:H=>E(v)},M,8,I)]))),128))])])]),_:1},512),[[x,n.value.length]]),e("div",G,[e("div",null,[y(e("button",{class:"btn btn-primary",onClick:s[0]||(s[0]=i=>w(t).proceedToStep4())}," 下一步 ",512),[[x,n.value.length]])]),e("button",{type:"button",class:"btn btn-outline-secondary",onClick:s[1]||(s[1]=i=>w(t).proceedToStep2())}," 回上頁 ")])],64)}}});export{O as default};
