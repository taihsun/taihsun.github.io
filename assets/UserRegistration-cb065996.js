import{u as I,a as O,r as d,b as R,c as T,d as P,w as j,e as h,o as B,f as U,g as e,h as n,i as g,t,j as v,v as w,k as r,l as D,_ as K,n as M,m as N}from"./index-e1983c57.js";import{u as Q}from"./FormSchemaStore-c17f1859.js";import{O as Y}from"./Option-3450003d.js";import"./index.esm-6a6e6be2.js";const q={class:"content-wrapper"},H={class:"container-xxl flex-grow-1 container-p-y"},L={class:"row d-flex justify-content-center"},G={class:"col-md-7"},J=e("a",{class:"d-flex justify-content-center mb-4","th:href":"@{/auth/login}"},[e("img",{"th:src":"@{/images/logo_tac.png}"})],-1),W={class:"d-flex align-items-start align-items-sm-center"},X={class:"alert alert-warning"},Z={class:"fw-bold mb-1 text-dark"},ee={class:"mb-0 text-dark"},se={class:"mb-0 text-dark"},te={class:"mb-0 text-dark"},oe={class:"mb-0 text-danger"},ae=e("hr",{class:"my-2"},null,-1),ne={class:"row"},re={class:"mb-1 col-md-6"},le={for:"title",class:"form-label red-star"},ie={class:"mb-1 col-md-6"},ce={for:"username",class:"form-label red-star"},de={class:"mb-1 col-md-12"},me={for:"address",class:"form-label red-star"},he={class:"mb-1 col-md-6"},ue={class:"form-label red-star",for:"phone"},_e={class:"mb-1 col-md-6"},pe={class:"form-label",for:"mobile"},fe={class:"mb-1 col-md-6"},be={for:"organization",class:"form-label red-star"},ge={class:"mt-2"},ve={class:"mb-1 col-md-6"},we={class:"form-label red-star",for:"department"},$e={class:"mb-1 col-md-6"},xe={class:"form-label red-star",for:"password"},Se={class:"mb-1 col-md-6"},ye={class:"form-label red-star",for:"confirmPwd"},ze={class:"mb-1 col-md-12"},Ee=e("div",{class:"invalid-feedback"},"Recaptch Error",-1),ke={class:"mt-2"},Ve={type:"submit",class:"btn btn-primary me-2"},Re={__name:"UserRegistration",setup(Ae){const{userRegistraionFormSchema:$}=Q(),x={}.VITE_RECAPTCH_SITE_KEY,S=I(),{locale:y}=O(),u=d(""),_=R().map(s=>new Y(s.id,s.name,s.id)),{handleSubmit:z,values:p,defineField:E}=T({validationSchema:$}),[i]=E("organizationOther");function k(s){u.value=s}function V(){console.log("驗證過期啦QAQ")}function A(){console.log("failed")}const C=d(!1),l=d(""),f=z(s=>{P(s,u.value).then(function(o){S.push({name:"Login",params:{message:o.data}})}).catch(function(o){console.log(o),o.response?l.value=o.response.data.errors[0].defaultMessage:o.request?l.value="Server side error":l.value=o.message})}),b=d(!1);return j(p,(s,o)=>{b.value=s.organization!==void 0&&N.findIndex(_,function(a){const c=a.id===p.organization&&a.name==="其它";return c||(i.value=void 0),c})===0}),(s,o)=>{const a=h("AppInput"),c=h("AppSelect"),F=h("AppCard");return B(),U("div",q,[e("div",H,[e("div",L,[e("div",G,[J,n(F,null,{header:g(()=>[e("h5",null,t(s.$t("text.registration")),1)]),body:g(()=>[e("div",W,[e("div",X,[e("h6",Z,t(s.$t("text.note.title")),1),e("ul",null,[e("li",ee,t(s.$t("text.note.first")),1),e("li",se,t(s.$t("text.note.second")),1),e("li",te,t(s.$t("text.note.third")),1),e("li",oe,t(s.$t("text.note.forth")),1)])])]),v(e("span",{class:"text-danger"},t(l.value),513),[[w,l.value]]),ae,e("form",{onSubmit:o[1]||(o[1]=(...m)=>r(f)&&r(f)(...m))},[e("div",ne,[e("div",re,[e("label",le,t(s.$t("text.name")),1),n(a,{name:"title","show-error-message":!0})]),e("div",ie,[e("label",ce,t(s.$t("text.email")),1),n(a,{name:"username","show-error-message":!0})]),e("div",de,[e("label",me,t(s.$t("text.address")),1),n(a,{name:"address","show-error-message":!0})]),e("div",he,[e("label",ue,t(s.$t("text.tel")),1),n(a,{name:"phone","show-error-message":!0})]),e("div",_e,[e("label",pe,t(s.$t("text.mobile")),1),n(a,{name:"mobile","show-error-message":!0})]),e("div",fe,[e("label",be,t(s.$t("text.organization")),1),n(c,{name:"organization",options:r(_),"show-error-message":!0},null,8,["options"]),v(e("div",ge,[n(a,{name:"organizationOther",placeholder:s.$t("placeholder.customOrganization"),"show-error-message":!0,modelValue:r(i),"onUpdate:modelValue":o[0]||(o[0]=m=>D(i)?i.value=m:null)},null,8,["placeholder","modelValue"])],512),[[w,b.value]])]),e("div",ve,[e("label",we,t(s.$t("text.department")),1),n(a,{name:"department","show-error-message":!0})]),e("div",$e,[e("label",xe,t(s.$t("text.password")),1),n(a,{name:"pwd",type:"password",autocomplete:"off","show-error-message":!0})]),e("div",Se,[e("label",ye,t(s.$t("text.confirmPassword")),1),n(a,{name:"confirmPwd",type:"password","show-error-message":!0})]),e("div",ze,[n(r(K),{sitekey:r(x),size:"normal",theme:"light",hl:r(y),onVerify:k,onExpire:V,onFail:A,class:M({"is-invalid":C.value})},null,8,["sitekey","hl","class"]),Ee])]),e("div",ke,[e("button",Ve,t(s.$t("button.register")),1)])],32)]),_:1})])])])])}}};export{Re as default};
