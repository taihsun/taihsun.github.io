var k=Object.defineProperty;var B=(l,s,o)=>s in l?k(l,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[s]=o;var p=(l,s,o)=>(B(l,typeof s!="symbol"?s+"":s,o),o);import{b as O,c as P,d as U}from"./api-9f51bc32.js";import{a as V,r as f,x as y,D,c as N,h as _,o as A,i as I,j as e,t as n,C as E,A as M,k as c,w as j,F as T,B as S,m as h}from"./index-c3923e02.js";import{u as q}from"./FormSchemaStore-2dcac12c.js";class G{constructor(s,o,d){p(this,"id");p(this,"name");p(this,"value");this.id=s,this.name=o,this.value=d}}const H={class:"fw-bold py-3 mb-4"},J={class:"row"},K={class:"mb-1 col-md-6"},L={for:"title",class:"form-label"},Q={id:"title"},R={class:"mb-1 col-md-6"},W={for:"username",class:"form-label"},X={id:"username"},Y={class:"mb-1 col-md-12"},Z={for:"address",class:"form-label red-star"},ee={class:"mb-1 col-md-6"},se={class:"form-label red-star",for:"phone"},te={class:"mb-1 col-md-6"},ae={class:"form-label",for:"mobile"},oe={class:"mb-1 col-md-6"},ne={for:"organization",class:"form-label red-star"},le={class:"mb-1 col-md-6"},re={class:"form-label red-star",for:"department"},ie={class:"mt-2"},ce={type:"submit",class:"btn btn-primary me-2"},_e={__name:"UserProfile",async setup(l){let s,o;const{t:d}=V(),{userProfileFormSchema:$}=q(),i=f(""),m=f(!1),b=f([]);try{b.value=([s,o]=y(()=>O().then(t=>t.map(a=>new G(a.id,a.name,a.id)))),s=await s,o(),s)}catch{m.value=!1,i.value=d("message.fetchOrganizations.failure")}let v=D({});try{v=([s,o]=y(()=>P()),s=await s,o(),s)}catch{m.value=!1,i.value=d("message.fetchUserProfile.failure")}const{values:g,handleSubmit:C}=N({initialValues:v,validationSchema:$}),w=C(t=>{U(t).then(a=>{m.value=!0,i.value=a==null?void 0:a.data}).catch(function(a){var u,r;m.value=((u=a.response)==null?void 0:u.status)===200,i.value=(r=a.response)==null?void 0:r.data})});return(t,a)=>{const u=_("AppMessage"),r=_("AppInput"),F=_("AppSelect"),x=_("AppCard");return A(),I(T,null,[e("h4",H,n(t.$t("text.profileDetails")),1),i.value?(A(),E(u,{key:0,message:i.value,success:m.value},null,8,["message","success"])):M("",!0),c(x,null,{body:j(()=>[e("form",{onSubmit:a[0]||(a[0]=(...z)=>h(w)&&h(w)(...z))},[e("div",J,[e("div",K,[e("label",L,n(t.$t("text.name")),1),S(": "),e("span",Q,n(h(g).title),1)]),e("div",R,[e("label",W,n(t.$t("text.email")),1),S(": "),e("span",X,n(h(g).username),1)]),e("div",Y,[e("label",Z,n(t.$t("text.address")),1),c(r,{name:"address","show-error-message":!0})]),e("div",ee,[e("label",se,n(t.$t("text.tel")),1),c(r,{name:"phone","show-error-message":!0})]),e("div",te,[e("label",ae,n(t.$t("text.mobile")),1),c(r,{name:"mobile","show-error-message":!0})]),e("div",oe,[e("label",ne,n(t.$t("text.organization")),1),c(F,{name:"organization",options:b.value,defaultOption:!1,"show-error-message":!0},null,8,["options"])]),e("div",le,[e("label",re,n(t.$t("text.department")),1),c(r,{name:"department","show-error-message":!0})])]),e("div",ie,[e("button",ce,n(t.$t("button.update")),1)])],32)]),_:1})],64)}}};export{_e as default};
