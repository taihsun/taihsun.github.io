import{p as F,r as p,q as S,e as b,o as d,f as u,j as y,v as x,h as _,i,g as e,k as B,F as C,s as L,m as j}from"./index-6fec12ad.js";const D=e("p",{class:"text-danger text-decoration-line-through"}," 實驗類型選擇[非活體],並且病理實驗類型為[血液及尿液相關實驗],[組織切片],[玻片掃描]時才顯示步驟 ",-1),R=e("h4",{class:"fw-bold py-3 mb-4"},"下載及上傳簽名申請表",-1),N=e("h5",{class:"mb-0"},"下載已簽名申請表",-1),T={class:"demo-inline-spacing mt-3"},U={class:"list-group"},V=["onClick"],$=e("i",{class:"bi bi-x"},null,-1),q=[$],I=e("h5",{class:"mb-0"},"上傳已簽名申請表",-1),z={class:"input-group"},G={class:"mb-2 d-flex justify-content-between flex-row-reverse mt-4"},H={class:"btn btn-primary"},M={__name:"ExpApplicationStep3",props:["id"],async setup(g){let l,h;const o=g,s=F();s.loadExpCaseById(o.id);const m=p(null),n=p(([l,h]=S(()=>s.fetchUploadedExpApplicationForms(o.id)),l=await l,h(),l)),c=p([]);function w(t){Array.from(t.target.files).forEach(a=>{c.value.push(a)})}async function k(){try{await s.uploadFiles(o.id,c.value),c.value=[],n.value=await s.fetchUploadedExpApplicationForms(o.id)}catch(t){console.error(t)}m.value.value=""}const A=t=>{j.pullAt(n.value,t),s.deleteExpCaseApplicationForms(t,o.id)};return(t,a)=>{const E=b("AppDownloadLink"),f=b("AppCard");return d(),u(C,null,[D,R,y(_(f,null,{header:i(()=>[N]),body:i(()=>[e("div",T,[e("ul",U,[(d(!0),u(C,null,L(n.value,(r,v)=>(d(),u("li",{class:"list-group-item d-flex justify-content-between",key:v},[_(E,{name:r.name,value:r.value},null,8,["name","value"]),e("a",{href:"#",class:"link-danger",onClick:J=>A(v)},q,8,V)]))),128))])])]),_:1},512),[[x,n.value.length]]),_(f,{class:"mt-4"},{header:i(()=>[I]),body:i(()=>[e("div",z,[e("input",{type:"file",class:"form-control",onChange:w,multiple:"",ref_key:"fileRef",ref:m},null,544),e("button",{class:"btn btn-outline-primary",type:"button",onClick:k},"上傳")])]),_:1}),e("div",G,[e("div",null,[y(e("button",H,"確定申請",512),[[x,n.value.length]])]),e("button",{type:"button",class:"btn btn-outline-secondary",onClick:a[0]||(a[0]=r=>B(s).proceedToStep2())}," 回上頁 ")])],64)}}};export{M as default};
