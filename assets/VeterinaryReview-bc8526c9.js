import{M as D}from"./MouseHotelService-eeff7f87.js";import{d as H,D as L,r as d,s as N,e as O,h as u,o as l,c as v,j as o,w as s,A as K,t as g,a as t,B as E,z as R,F as x,y as M,l as e,al as T}from"./index-668b5f53.js";import{_ as j}from"./ExpApplicationStep6LivingFormPreview.vue_vue_type_script_setup_true_lang-5abb6f25.js";import{v as P,V as n}from"./ExpCaseFormSchema-8e308c1c.js";import"./LivingFormPreview.vue_vue_type_script_setup_true_lang-09fc9b60.js";import"./AnimalType-4489de17.js";import"./SelectedIhcCommissionedItemPanel-5efc309b.js";import"./LocationService-6e2d4a94.js";import"./LocationDbSimulator-4e1c5fba.js";import"./formSchema-b94cdea0.js";const $=t("h4",{class:"fw-bold py-3 mb-4"},"審查動物入室",-1),z=t("h5",{class:"mb-0"},"已簽名的申請表",-1),q={class:"list-group"},G=t("h5",null,"核查結果",-1),J={class:"mb-4"},Q={id:"section3"},U={class:"mb-2 d-flex justify-content-between flex-row-reverse mt-2"},le=H({__name:"VeterinaryReview",props:{mouseHotelId:{}},async setup(A){let _,h;const b=A,C=L(),y=D.getInstance(),f=d(),c=d(),k=d();[_,h]=N(()=>y.fetchVetReuvewData(b.mouseHotelId).then(a=>{f.value=a.labType,c.value=a.livingForms,k.value=a.signatureForms}).catch(a=>{console.error(a)})),await _,h();const{handleSubmit:S,values:w}=O({validationSchema:P}),V=S(async a=>{await y.completeVeterinaryReview(b.mouseHotelId,a).then(()=>{C.toMain()}).catch(r=>{console.error(r.message)})});return(a,r)=>{const i=u("AppCard"),F=u("AppDownloadLink"),I=u("AppCheckbox2"),p=u("AppRadio");return l(),v(x,null,[$,o(i,{class:"my-1"},{body:s(()=>[K(" 單位："+g(f.value),1)]),_:1}),o(i,null,{header:s(()=>[t("h5",null,g(c.value?"活體入室申請表":"非活體入室申請表"),1)]),body:s(()=>[c.value?(l(),E(j,{key:0,livingForms:c.value},null,8,["livingForms"])):R("",!0)]),_:1}),o(i,{class:"my-1"},{header:s(()=>[z]),body:s(()=>[t("ul",q,[(l(!0),v(x,null,M(k.value,(m,B)=>(l(),v("li",{class:"list-group-item d-flex border-0",key:B},[o(F,{name:m.name,value:m.value},null,8,["name","value"])]))),128))])]),_:1}),o(i,{class:"my-1"},{header:s(()=>[G]),body:s(()=>[t("div",J,[o(I,{id:"urgent",name:"urgent",label:"是否為急件"})]),t("div",Q,[o(p,{id:"approve",name:"action","checked-value":e(n).APPROVE,label:"核准入室申請"},null,8,["checked-value"]),o(p,{id:"cancel",name:"action","checked-value":e(n).REVOKE,label:"撤銷"},null,8,["checked-value"]),o(p,{id:"revise",name:"action","checked-value":e(n).REVISE,label:"退回申請人修改"},null,8,["checked-value"]),[e(n).REVISE,e(n).REVOKE].includes(e(w).action)?(l(),E(T,{key:0,name:"reason",placeholder:e(w).action===e(n).REVOKE?"請填寫撤銷原因":"請填寫修改建議"},null,8,["placeholder"])):R("",!0)])]),_:1}),t("div",U,[t("button",{type:"button",class:"btn btn-primary",onClick:r[0]||(r[0]=(...m)=>e(V)&&e(V)(...m))},"確定")])],64)}}});export{le as default};
