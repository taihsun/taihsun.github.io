import{d as y,K as x,M as A,ac as E,q as j,a as C,c as P,e as n,o as k,f as F,g as s,h as o,w as N,j as c,i as R,v as z,F as B}from"./index-501cd1c4.js";import{g as I}from"./ProjectSource-b760b0a5.js";import{p as T}from"./formSchema-64a74bbf.js";const O=s("h4",{class:"fw-bold py-3 mb-4"},"建立計畫",-1),U={class:"row mb-3"},V=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫主持人帳號",-1),Y={class:"col-sm-10"},q={class:"row mb-3"},D=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫共同負責人帳號",-1),K={class:"col-sm-10"},M={class:"row mb-3"},G=s("label",{class:"col-sm-2 col-form-label red-star"},"主要聯絡人帳號",-1),H={class:"col-sm-10"},J={class:"input-group input-group-merge"},L={class:"row mb-3"},Q=s("label",{class:"col-sm-2 col-form-label red-star"},"主要聯絡人電話",-1),W={class:"col-sm-10"},X={class:"input-group input-group-merge"},Z={class:"row mb-3"},$=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫編號",-1),ss={class:"col-sm-10"},os={class:"row mb-3"},es=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫名稱",-1),ts={class:"col-sm-10"},cs={class:"row mb-3"},ls=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫核銷機構(收據抬頭)",-1),as={class:"col-sm-10"},ns={class:"row mb-3"},is=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫所屬部門",-1),ds={class:"col-sm-10"},rs={class:"row mb-3"},ms=s("label",{class:"col-sm-2 col-form-label red-star"},"產學合作",-1),_s={class:"col-sm-10"},ps={class:"row mb-3"},hs=s("label",{class:"col-sm-2 col-form-label red-star"},"計畫經費來源",-1),us={class:"col-sm-10"},bs={class:"row mb-3"},vs=s("label",{class:"col-sm-2 col-form-label"},"計畫描述",-1),fs={class:"col-sm-10"},ws={class:"row mb-3"},gs=s("label",{class:"col-sm-2 col-form-label red-star"},"有無計畫執行期限",-1),Ss={class:"col-sm-4"},ys={class:"row mb-3"},xs=s("label",{class:"col-sm-2 col-form-label",for:""},"計畫執行期限",-1),As={class:"col-sm-4"},Es={class:"input-group mb-3"},js=s("span",{class:"input-group-text"},"起",-1),Cs={class:"col-sm-4"},Ps={class:"input-group"},ks=s("span",{class:"input-group-text"},"迄",-1),Fs=s("div",{class:"mb-2 d-flex justify-content-between flex-row-reverse mt-2"},[s("button",{type:"submit",class:"btn btn-primary"},"建立計畫")],-1),Bs=y({__name:"ExpApplicationStep5",props:{id:{}},setup(p){const h=x(),{loggedInUser:i}=A(h),d=p,u=E().map(t=>({id:t.id.toString(),name:t.name,value:t.id.toString()})),b=I(),r=j(),{values:v,handleSubmit:f}=C({validationSchema:T}),w=P(()=>v.deadline==="yes"),m=f(async t=>{r.createProject(d.id,t).then(()=>{r.proceedToReviewProject(d.id)}).catch(l=>{console.error(l)})});return(t,l)=>{const e=n("AppInput"),_=n("AppSelect"),a=n("AppRadio"),g=n("AppCard");return k(),F(B,null,[O,s("form",{onSubmit:l[0]||(l[0]=(...S)=>c(m)&&c(m)(...S))},[o(g,{class:"mt-2"},{body:N(()=>[s("div",U,[V,s("div",Y,[o(e,{placeholder:"Email",type:"email",name:"piEmail"})])]),s("div",q,[D,s("div",K,[o(e,{placeholder:"Email",type:"email",name:"coPiEmail"})])]),s("div",M,[G,s("div",H,[s("div",J,[o(e,{placeholder:"Email",type:"email",name:"contactEmail",value:c(i)?.username},null,8,["value"])])])]),s("div",L,[Q,s("div",W,[s("div",X,[o(e,{name:"contactPhone",value:c(i)?.phone},null,8,["value"])])])]),s("div",Z,[$,s("div",ss,[o(e,{name:"code"})])]),s("div",os,[es,s("div",ts,[o(e,{name:"name"})])]),s("div",cs,[ls,s("div",as,[o(_,{name:"organization",options:c(u)},null,8,["options"])])]),s("div",ns,[is,s("div",ds,[o(e,{name:"department"})])]),s("div",rs,[ms,s("div",_s,[o(a,{label:"是",id:"cooperateY",name:"cooperate","checked-value":"yes"}),o(a,{label:"否",id:"cooperateN",name:"cooperate","checked-value":"no"})])]),s("div",ps,[hs,s("div",us,[o(_,{name:"projectSource",options:c(b)},null,8,["options"])])]),s("div",bs,[vs,s("div",fs,[o(e,{name:"description"})])]),s("div",ws,[gs,s("div",Ss,[o(a,{label:"有",id:"deadlineY",name:"deadline","checked-value":"yes"}),o(a,{label:"無",id:"deadlineN",name:"deadline","checked-value":"no"})])]),R(s("div",ys,[xs,s("div",As,[s("div",Es,[o(e,{type:"date",name:"executionPeriodFrom"}),js])]),s("div",Cs,[s("div",Ps,[o(e,{type:"date",name:"executionPeriodTo"}),ks])])],512),[[z,w.value]])]),_:1}),Fs],32)],64)}}});export{Bs as default};
